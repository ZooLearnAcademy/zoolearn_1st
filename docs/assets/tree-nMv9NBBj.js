import{a as e,i as t,n,o as r,r as i,t as a}from"./index-CF1IZsTF.js";var o=a(),s=r(t(),1);function c(e){if(typeof e==`string`||typeof e==`number`)return``+e;let t=``;if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=c(e[n]))!==``&&(t+=(t&&` `)+r);else for(let n in e)e[n]&&(t+=(t&&` `)+n);return t}var l={value:()=>{}};function u(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new d(n)}function d(e){this._=e}function f(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}d.prototype=u.prototype={constructor:d,on:function(e,t){var n=this._,r=f(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=p(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=m(n[i],e.name,t);else if(t==null)for(i in n)n[i]=m(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new d(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function p(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function m(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=l,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var h=u,g={svg:`http://www.w3.org/2000/svg`,xhtml:`http://www.w3.org/1999/xhtml`,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function _(e){var t=e+=``,n=t.indexOf(`:`);return n>=0&&(t=e.slice(0,n))!==`xmlns`&&(e=e.slice(n+1)),g.hasOwnProperty(t)?{space:g[t],local:e}:e}function v(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===`http://www.w3.org/1999/xhtml`&&t.documentElement.namespaceURI===`http://www.w3.org/1999/xhtml`?t.createElement(e):t.createElementNS(n,e)}}function y(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function b(e){var t=_(e);return(t.local?y:v)(t)}function x(){}function S(e){return e==null?x:function(){return this.querySelector(e)}}function C(e){typeof e!=`function`&&(e=S(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&(`__data__`in c&&(l.__data__=c.__data__),s[u]=l);return new G(r,this._parents)}function w(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function T(){return[]}function E(e){return e==null?T:function(){return this.querySelectorAll(e)}}function D(e){return function(){return w(e.apply(this,arguments))}}function O(e){e=typeof e==`function`?D(e):E(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new G(r,i)}function k(e){return function(){return this.matches(e)}}function A(e){return function(t){return t.matches(e)}}var j=Array.prototype.find;function M(e){return function(){return j.call(this.children,e)}}function N(){return this.firstElementChild}function P(e){return this.select(e==null?N:M(typeof e==`function`?e:A(e)))}var F=Array.prototype.filter;function I(){return Array.from(this.children)}function L(e){return function(){return F.call(this.children,e)}}function R(e){return this.selectAll(e==null?I:L(typeof e==`function`?e:A(e)))}function z(e){typeof e!=`function`&&(e=k(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new G(r,this._parents)}function B(e){return Array(e.length)}function V(){return new G(this._enter||this._groups.map(B),this._parents)}function H(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}H.prototype={constructor:H,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ee(e){return function(){return e}}function U(e,t,n,r,i,a){for(var o=0,s,c=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new H(e,a[o]);for(;o<c;++o)(s=t[o])&&(i[o]=s)}function W(e,t,n,r,i,a,o){var s,c,l=new Map,u=t.length,d=a.length,f=Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=o.call(c,c.__data__,s,t)+``,l.has(p)?i[s]=c:l.set(p,c));for(s=0;s<d;++s)p=o.call(e,a[s],s,a)+``,(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new H(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function te(e){return e.__data__}function ne(e,t){if(!arguments.length)return Array.from(this,te);var n=t?W:U,r=this._parents,i=this._groups;typeof e!=`function`&&(e=ee(e));for(var a=i.length,o=Array(a),s=Array(a),c=Array(a),l=0;l<a;++l){var u=r[l],d=i[l],f=d.length,p=re(e.call(u,u&&u.__data__,l,r)),m=p.length,h=s[l]=Array(m),g=o[l]=Array(m);n(u,d,h,g,c[l]=Array(f),p,t);for(var _=0,v=0,y,b;_<m;++_)if(y=h[_]){for(_>=v&&(v=_+1);!(b=g[v])&&++v<m;);y._next=b||null}}return o=new G(o,r),o._enter=s,o._exit=c,o}function re(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function ie(){return new G(this._exit||this._groups.map(B),this._parents)}function ae(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e==`function`?(r=e(r),r&&=r.selection()):r=r.append(e+``),t!=null&&(i=t(i),i&&=i.selection()),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function oe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=Array(d),p,m=0;m<d;++m)(p=l[m]||u[m])&&(f[m]=p);for(;c<i;++c)s[c]=n[c];return new G(s,this._parents)}function se(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function ce(e){e||=le;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new G(i,this._parents).order()}function le(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ue(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function de(){return Array.from(this)}function fe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function pe(){let e=0;for(let t of this)++e;return e}function me(){return!this.node()}function he(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function ge(e){return function(){this.removeAttribute(e)}}function _e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ve(e,t){return function(){this.setAttribute(e,t)}}function ye(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function be(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function xe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Se(e,t){var n=_(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_e:ge:typeof t==`function`?n.local?xe:be:n.local?ye:ve)(n,t))}function Ce(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function we(e){return function(){this.style.removeProperty(e)}}function Te(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ee(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function De(e,t,n){return arguments.length>1?this.each((t==null?we:typeof t==`function`?Ee:Te)(e,t,n??``)):Oe(this.node(),e)}function Oe(e,t){return e.style.getPropertyValue(t)||Ce(e).getComputedStyle(e,null).getPropertyValue(t)}function ke(e){return function(){delete this[e]}}function Ae(e,t){return function(){this[e]=t}}function je(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Me(e,t){return arguments.length>1?this.each((t==null?ke:typeof t==`function`?je:Ae)(e,t)):this.node()[e]}function Ne(e){return e.trim().split(/^|\s+/)}function Pe(e){return e.classList||new Fe(e)}function Fe(e){this._node=e,this._names=Ne(e.getAttribute(`class`)||``)}Fe.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(e){return this._names.indexOf(e)>=0}};function Ie(e,t){for(var n=Pe(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Le(e,t){for(var n=Pe(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Re(e){return function(){Ie(this,e)}}function ze(e){return function(){Le(this,e)}}function Be(e,t){return function(){(t.apply(this,arguments)?Ie:Le)(this,e)}}function Ve(e,t){var n=Ne(e+``);if(arguments.length<2){for(var r=Pe(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t==`function`?Be:t?Re:ze)(n,t))}function He(){this.textContent=``}function Ue(e){return function(){this.textContent=e}}function We(e){return function(){this.textContent=e.apply(this,arguments)??``}}function Ge(e){return arguments.length?this.each(e==null?He:(typeof e==`function`?We:Ue)(e)):this.node().textContent}function Ke(){this.innerHTML=``}function qe(e){return function(){this.innerHTML=e}}function Je(e){return function(){this.innerHTML=e.apply(this,arguments)??``}}function Ye(e){return arguments.length?this.each(e==null?Ke:(typeof e==`function`?Je:qe)(e)):this.node().innerHTML}function Xe(){this.nextSibling&&this.parentNode.appendChild(this)}function Ze(){return this.each(Xe)}function Qe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $e(){return this.each(Qe)}function et(e){var t=typeof e==`function`?e:b(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function tt(){return null}function nt(e,t){var n=typeof e==`function`?e:b(e),r=t==null?tt:typeof t==`function`?t:S(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function rt(){var e=this.parentNode;e&&e.removeChild(this)}function it(){return this.each(rt)}function at(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ot(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function st(e){return this.select(e?ot:at)}function ct(e){return arguments.length?this.property(`__data__`,e):this.node().__data__}function lt(e){return function(t){e.call(this,t,this.__data__)}}function ut(e){return e.trim().split(/^|\s+/).map(function(e){var t=``,n=e.indexOf(`.`);return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function dt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function ft(e,t,n){return function(){var r=this.__on,i,a=lt(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function pt(e,t,n){var r=ut(e+``),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?ft:dt,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function mt(e,t,n){var r=Ce(e),i=r.CustomEvent;typeof i==`function`?i=new i(t,n):(i=r.document.createEvent(`Event`),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ht(e,t){return function(){return mt(this,e,t)}}function gt(e,t){return function(){return mt(this,e,t.apply(this,arguments))}}function _t(e,t){return this.each((typeof t==`function`?gt:ht)(e,t))}function*vt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var yt=[null];function G(e,t){this._groups=e,this._parents=t}function bt(){return new G([[document.documentElement]],yt)}function xt(){return this}G.prototype=bt.prototype={constructor:G,select:C,selectAll:O,selectChild:P,selectChildren:R,filter:z,data:ne,enter:V,exit:ie,join:ae,merge:oe,selection:xt,order:se,sort:ce,call:ue,nodes:de,node:fe,size:pe,empty:me,each:he,attr:Se,style:De,property:Me,classed:Ve,text:Ge,html:Ye,raise:Ze,lower:$e,append:et,insert:nt,remove:it,clone:st,datum:ct,on:pt,dispatch:_t,[Symbol.iterator]:vt};var St=bt;function K(e){return typeof e==`string`?new G([[document.querySelector(e)]],[document.documentElement]):new G([[e]],yt)}function Ct(e){let t;for(;t=e.sourceEvent;)e=t;return e}function q(e,t){if(e=Ct(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const wt={passive:!1},Tt={capture:!0,passive:!1};function Et(e){e.stopImmediatePropagation()}function Dt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ot(e){var t=e.document.documentElement,n=K(e).on(`dragstart.drag`,Dt,Tt);`onselectstart`in t?n.on(`selectstart.drag`,Dt,Tt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect=`none`)}function kt(e,t){var n=e.document.documentElement,r=K(e).on(`dragstart.drag`,null);t&&(r.on(`click.drag`,Dt,Tt),setTimeout(function(){r.on(`click.drag`,null)},0)),`onselectstart`in n?r.on(`selectstart.drag`,null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var At=e=>()=>e;function jt(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}jt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Mt(e){return!e.ctrlKey&&!e.button}function Nt(){return this.parentNode}function Pt(e,t){return t??{x:e.x,y:e.y}}function Ft(){return navigator.maxTouchPoints||`ontouchstart`in this}function It(){var e=Mt,t=Nt,n=Pt,r=Ft,i={},a=h(`start`,`drag`,`end`),o=0,s,c,l,u,d=0;function f(e){e.on(`mousedown.drag`,p).filter(r).on(`touchstart.drag`,_).on(`touchmove.drag`,v,wt).on(`touchend.drag touchcancel.drag`,y).style(`touch-action`,`none`).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}function p(n,r){if(!(u||!e.call(this,n,r))){var i=b(this,t.call(this,n,r),n,r,`mouse`);i&&(K(n.view).on(`mousemove.drag`,m,Tt).on(`mouseup.drag`,g,Tt),Ot(n.view),Et(n),l=!1,s=n.clientX,c=n.clientY,i(`start`,n))}}function m(e){if(Dt(e),!l){var t=e.clientX-s,n=e.clientY-c;l=t*t+n*n>d}i.mouse(`drag`,e)}function g(e){K(e.view).on(`mousemove.drag mouseup.drag`,null),kt(e.view,l),Dt(e),i.mouse(`end`,e)}function _(n,r){if(e.call(this,n,r)){var i=n.changedTouches,a=t.call(this,n,r),o=i.length,s,c;for(s=0;s<o;++s)(c=b(this,a,n,r,i[s].identifier,i[s]))&&(Et(n),c(`start`,n,i[s]))}}function v(e){var t=e.changedTouches,n=t.length,r,a;for(r=0;r<n;++r)(a=i[t[r].identifier])&&(Dt(e),a(`drag`,e,t[r]))}function y(e){var t=e.changedTouches,n=t.length,r,a;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),r=0;r<n;++r)(a=i[t[r].identifier])&&(Et(e),a(`end`,e,t[r]))}function b(e,t,r,s,c,l){var u=a.copy(),d=q(l||r,t),p,m,h;if((h=n.call(e,new jt(`beforestart`,{sourceEvent:r,target:f,identifier:c,active:o,x:d[0],y:d[1],dx:0,dy:0,dispatch:u}),s))!=null)return p=h.x-d[0]||0,m=h.y-d[1]||0,function n(r,a,l){var g=d,_;switch(r){case`start`:i[c]=n,_=o++;break;case`end`:delete i[c],--o;case`drag`:d=q(l||a,t),_=o;break}u.call(r,e,new jt(r,{sourceEvent:a,subject:h,target:f,identifier:c,active:_,x:d[0]+p,y:d[1]+m,dx:d[0]-g[0],dy:d[1]-g[1],dispatch:u}),s)}}return f.filter=function(t){return arguments.length?(e=typeof t==`function`?t:At(!!t),f):e},f.container=function(e){return arguments.length?(t=typeof e==`function`?e:At(e),f):t},f.subject=function(e){return arguments.length?(n=typeof e==`function`?e:At(e),f):n},f.touchable=function(e){return arguments.length?(r=typeof e==`function`?e:At(!!e),f):r},f.on=function(){var e=a.on.apply(a,arguments);return e===a?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function Lt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zt(){}var Bt=.7,Vt=1/Bt,Ht=`\\s*([+-]?\\d+)\\s*`,Ut=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,Wt=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,Gt=/^#([0-9a-f]{3,8})$/,Kt=RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),qt=RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),Jt=RegExp(`^rgba\\(${Ht},${Ht},${Ht},${Ut}\\)$`),Yt=RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Ut}\\)$`),Xt=RegExp(`^hsl\\(${Ut},${Wt},${Wt}\\)$`),Zt=RegExp(`^hsla\\(${Ut},${Wt},${Wt},${Ut}\\)$`),Qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lt(zt,rn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$t,formatHex:$t,formatHex8:en,formatHsl:tn,formatRgb:nn,toString:nn});function $t(){return this.rgb().formatHex()}function en(){return this.rgb().formatHex8()}function tn(){return gn(this).formatHsl()}function nn(){return this.rgb().formatRgb()}function rn(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=Gt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?an(t):n===3?new J(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?on(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?on(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kt.exec(e))?new J(t[1],t[2],t[3],1):(t=qt.exec(e))?new J(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Jt.exec(e))?on(t[1],t[2],t[3],t[4]):(t=Yt.exec(e))?on(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xt.exec(e))?hn(t[1],t[2]/100,t[3]/100,1):(t=Zt.exec(e))?hn(t[1],t[2]/100,t[3]/100,t[4]):Qt.hasOwnProperty(e)?an(Qt[e]):e===`transparent`?new J(NaN,NaN,NaN,0):null}function an(e){return new J(e>>16&255,e>>8&255,e&255,1)}function on(e,t,n,r){return r<=0&&(e=t=n=NaN),new J(e,t,n,r)}function sn(e){return e instanceof zt||(e=rn(e)),e?(e=e.rgb(),new J(e.r,e.g,e.b,e.opacity)):new J}function cn(e,t,n,r){return arguments.length===1?sn(e):new J(e,t,n,r??1)}function J(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Lt(J,cn,Rt(zt,{brighter(e){return e=e==null?Vt:Vt**+e,new J(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bt:Bt**+e,new J(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new J(pn(this.r),pn(this.g),pn(this.b),fn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ln,formatHex:ln,formatHex8:un,formatRgb:dn,toString:dn}));function ln(){return`#${mn(this.r)}${mn(this.g)}${mn(this.b)}`}function un(){return`#${mn(this.r)}${mn(this.g)}${mn(this.b)}${mn((isNaN(this.opacity)?1:this.opacity)*255)}`}function dn(){let e=fn(this.opacity);return`${e===1?`rgb(`:`rgba(`}${pn(this.r)}, ${pn(this.g)}, ${pn(this.b)}${e===1?`)`:`, ${e})`}`}function fn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mn(e){return e=pn(e),(e<16?`0`:``)+e.toString(16)}function hn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vn(e,t,n,r)}function gn(e){if(e instanceof vn)return new vn(e.h,e.s,e.l,e.opacity);if(e instanceof zt||(e=rn(e)),!e)return new vn;if(e instanceof vn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new vn(o,s,c,e.opacity)}function _n(e,t,n,r){return arguments.length===1?gn(e):new vn(e,t,n,r??1)}function vn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Lt(vn,_n,Rt(zt,{brighter(e){return e=e==null?Vt:Vt**+e,new vn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bt:Bt**+e,new vn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new J(xn(e>=240?e-240:e+120,i,r),xn(e,i,r),xn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new vn(yn(this.h),bn(this.s),bn(this.l),fn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=fn(this.opacity);return`${e===1?`hsl(`:`hsla(`}${yn(this.h)}, ${bn(this.s)*100}%, ${bn(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function yn(e){return e=(e||0)%360,e<0?e+360:e}function bn(e){return Math.max(0,Math.min(1,e||0))}function xn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Sn=e=>()=>e;function Cn(e,t){return function(n){return e+n*t}}function wn(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function Tn(e){return(e=+e)==1?En:function(t,n){return n-t?wn(t,n,e):Sn(isNaN(t)?n:t)}}function En(e,t){var n=t-e;return n?Cn(e,n):Sn(isNaN(e)?t:e)}var Dn=(function e(t){var n=Tn(t);function r(e,t){var r=n((e=cn(e)).r,(t=cn(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=En(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r})(1);function On(e,t){t||=[];var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function kn(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function An(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=Array(r),a=Array(n),o;for(o=0;o<r;++o)i[o]=zn(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(e){for(o=0;o<r;++o)a[o]=i[o](e);return a}}function jn(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Mn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Nn(e,t){var n={},r={},i;for(i in(typeof e!=`object`||!e)&&(e={}),(typeof t!=`object`||!t)&&(t={}),t)i in e?n[i]=zn(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}var Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fn=new RegExp(Pn.source,`g`);function In(e){return function(){return e}}function Ln(e){return function(t){return e(t)+``}}function Rn(e,t){var n=Pn.lastIndex=Fn.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=Pn.exec(e))&&(i=Fn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Mn(r,i)})),n=Fn.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?Ln(c[0].x):In(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}function zn(e,t){var n=typeof t,r;return t==null||n===`boolean`?Sn(t):(n===`number`?Mn:n===`string`?(r=rn(t))?(t=r,Dn):Rn:t instanceof rn?Dn:t instanceof Date?jn:kn(t)?On:Array.isArray(t)?An:typeof t.valueOf!=`function`&&typeof t.toString!=`function`||isNaN(t)?Nn:Mn)(e,t)}var Bn=180/Math.PI,Vn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hn(e,t,n,r,i,a){var o,s,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Bn,skewX:Math.atan(c)*Bn,scaleX:o,scaleY:s}}var Un;function Wn(e){let t=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(e+``);return t.isIdentity?Vn:Hn(t.a,t.b,t.c,t.d,t.e,t.f)}function Gn(e){return e==null||(Un||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),Un.setAttribute(`transform`,e),!(e=Un.transform.baseVal.consolidate()))?Vn:(e=e.matrix,Hn(e.a,e.b,e.c,e.d,e.e,e.f))}function Kn(e,t,n,r){function i(e){return e.length?e.pop()+` `:``}function a(e,r,i,a,o,s){if(e!==i||r!==a){var c=o.push(`translate(`,null,t,null,n);s.push({i:c-4,x:Mn(e,i)},{i:c-2,x:Mn(r,a)})}else (i||a)&&o.push(`translate(`+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+`rotate(`+t+r):(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+`rotate(`,null,r)-2,x:Mn(e,t)}))}function s(e,t,n,a){e===t?t&&n.push(i(n)+`skewX(`+t+r):a.push({i:n.push(i(n)+`skewX(`,null,r)-2,x:Mn(e,t)})}function c(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+`scale(`,null,`,`,null,`)`);o.push({i:s-4,x:Mn(e,n)},{i:s-2,x:Mn(t,r)})}else (n!==1||r!==1)&&a.push(i(a)+`scale(`+n+`,`+r+`)`)}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t=-1,n=i.length,a;++t<n;)r[(a=i[t]).i]=a.x(e);return r.join(``)}}}var qn=Kn(Wn,`px, `,`px)`,`deg)`),Jn=Kn(Gn,`, `,`)`,`)`),Yn=1e-12;function Xn(e){return((e=Math.exp(e))+1/e)/2}function Zn(e){return((e=Math.exp(e))-1/e)/2}function Qn(e){return((e=Math.exp(2*e))-1)/(e+1)}var $n=(function e(t,n,r){function i(e,i){var a=e[0],o=e[1],s=e[2],c=i[0],l=i[1],u=i[2],d=c-a,f=l-o,p=d*d+f*f,m,h;if(p<Yn)h=Math.log(u/s)/t,m=function(e){return[a+e*d,o+e*f,s*Math.exp(t*e*h)]};else{var g=Math.sqrt(p),_=(u*u-s*s+r*p)/(2*s*n*g),v=(u*u-s*s-r*p)/(2*u*n*g),y=Math.log(Math.sqrt(_*_+1)-_);h=(Math.log(Math.sqrt(v*v+1)-v)-y)/t,m=function(e){var r=e*h,i=Xn(y),c=s/(n*g)*(i*Qn(t*r+y)-Zn(y));return[a+c*d,o+c*f,s*i/Xn(t*r+y)]}}return m.duration=h*1e3*t/Math.SQRT2,m}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i})(Math.SQRT2,2,4),er=0,tr=0,nr=0,rr=1e3,ir,ar,or=0,sr=0,cr=0,lr=typeof performance==`object`&&performance.now?performance:Date,ur=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function dr(){return sr||=(ur(fr),lr.now()+cr)}function fr(){sr=0}function pr(){this._call=this._time=this._next=null}pr.prototype=mr.prototype={constructor:pr,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?dr():+n)+(t==null?0:+t),!this._next&&ar!==this&&(ar?ar._next=this:ir=this,ar=this),this._call=e,this._time=n,yr()},stop:function(){this._call&&(this._call=null,this._time=1/0,yr())}};function mr(e,t,n){var r=new pr;return r.restart(e,t,n),r}function hr(){dr(),++er;for(var e=ir,t;e;)(t=sr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--er}function gr(){sr=(or=lr.now())+cr,er=tr=0;try{hr()}finally{er=0,vr(),sr=0}}function _r(){var e=lr.now(),t=e-or;t>rr&&(cr-=t,or=e)}function vr(){for(var e,t=ir,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ir=n);ar=e,yr(r)}function yr(e){er||(tr&&=clearTimeout(tr),e-sr>24?(e<1/0&&(tr=setTimeout(gr,e-lr.now()-cr)),nr&&=clearInterval(nr)):(nr||=(or=lr.now(),setInterval(_r,rr)),er=1,ur(gr)))}function br(e,t,n){var r=new pr;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}var xr=h(`start`,`end`,`cancel`,`interrupt`),Sr=[];function Cr(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Dr(e,n,{name:t,index:r,group:i,on:xr,tween:Sr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function wr(e,t){var n=Er(e,t);if(n.state>0)throw Error(`too late; already scheduled`);return n}function Tr(e,t){var n=Er(e,t);if(n.state>3)throw Error(`too late; already running`);return n}function Er(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error(`transition not found`);return n}function Dr(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=mr(a,0,n.time);function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,u,d,f;if(n.state!==1)return c();for(l in r)if(f=r[l],f.name===n.name){if(f.state===3)return br(o);f.state===4?(f.state=6,f.timer.stop(),f.on.call(`interrupt`,e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call(`cancel`,e,e.__data__,f.index,f.group),delete r[l])}if(br(function(){n.state===3&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=2,n.on.call(`start`,e,e.__data__,n.index,n.group),n.state===2){for(n.state=3,i=Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===5&&(n.on.call(`end`,e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}}function Or(e,t){var n=e.__transition,r,i,a=!0,o;if(n){for(o in t=t==null?null:t+``,n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?`interrupt`:`cancel`,e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function kr(e){return this.each(function(){Or(this,e)})}function Ar(e,t){var n,r;return function(){var i=Tr(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function jr(e,t,n){var r,i;if(typeof n!=`function`)throw Error();return function(){var a=Tr(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function Mr(e,t){var n=this._id;if(e+=``,arguments.length<2){for(var r=Er(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Ar:jr)(n,e,t))}function Nr(e,t,n){var r=e._id;return e.each(function(){var e=Tr(this,r);(e.value||={})[t]=n.apply(this,arguments)}),function(e){return Er(e,r).value[t]}}function Pr(e,t){var n;return(typeof t==`number`?Mn:t instanceof rn?Dn:(n=rn(t))?(t=n,Dn):Rn)(e,t)}function Fr(e){return function(){this.removeAttribute(e)}}function Ir(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Lr(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Rr(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function zr(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function Br(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function Vr(e,t){var n=_(e),r=n===`transform`?Jn:Pr;return this.attrTween(e,typeof t==`function`?(n.local?Br:zr)(n,r,Nr(this,`attr.`+e,t)):t==null?(n.local?Ir:Fr)(n):(n.local?Rr:Lr)(n,r,t))}function Hr(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ur(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wr(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Ur(e,i)),n}return i._value=t,i}function Gr(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Hr(e,i)),n}return i._value=t,i}function Kr(e,t){var n=`attr.`+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=`function`)throw Error();var r=_(e);return this.tween(n,(r.local?Wr:Gr)(r,t))}function qr(e,t){return function(){wr(this,e).delay=+t.apply(this,arguments)}}function Jr(e,t){return t=+t,function(){wr(this,e).delay=t}}function Yr(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?qr:Jr)(t,e)):Er(this.node(),t).delay}function Xr(e,t){return function(){Tr(this,e).duration=+t.apply(this,arguments)}}function Zr(e,t){return t=+t,function(){Tr(this,e).duration=t}}function Qr(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?Xr:Zr)(t,e)):Er(this.node(),t).duration}function $r(e,t){if(typeof t!=`function`)throw Error();return function(){Tr(this,e).ease=t}}function ei(e){var t=this._id;return arguments.length?this.each($r(t,e)):Er(this.node(),t).ease}function ti(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!=`function`)throw Error();Tr(this,e).ease=n}}function ni(e){if(typeof e!=`function`)throw Error();return this.each(ti(this._id,e))}function ri(e){typeof e!=`function`&&(e=k(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Mi(r,this._parents,this._name,this._id)}function ii(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=o[s]=Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=t[s];return new Mi(o,this._parents,this._name,this._id)}function ai(e){return(e+``).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(`.`);return t>=0&&(e=e.slice(0,t)),!e||e===`start`})}function oi(e,t,n){var r,i,a=ai(t)?wr:Tr;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function si(e,t){var n=this._id;return arguments.length<2?Er(this.node(),n).on.on(e):this.each(oi(n,e,t))}function ci(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function li(){return this.on(`end.remove`,ci(this._id))}function ui(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=S(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&(`__data__`in u&&(d.__data__=u.__data__),l[f]=d,Cr(l[f],t,n,f,l,Er(u,n)));return new Mi(a,this._parents,t,n)}function di(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=E(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,m=Er(u,n),h=0,g=f.length;h<g;++h)(p=f[h])&&Cr(p,t,n,h,f,m);a.push(f),o.push(u)}return new Mi(a,o,t,n)}var fi=St.prototype.constructor;function pi(){return new fi(this._groups,this._parents)}function mi(e,t){var n,r,i;return function(){var a=Oe(this,e),o=(this.style.removeProperty(e),Oe(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function hi(e){return function(){this.style.removeProperty(e)}}function gi(e,t,n){var r,i=n+``,a;return function(){var o=Oe(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function _i(e,t,n){var r,i,a;return function(){var o=Oe(this,e),s=n(this),c=s+``;return s??(c=s=(this.style.removeProperty(e),Oe(this,e))),o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s))}}function vi(e,t){var n,r,i,a=`style.`+t,o=`end.`+a,s;return function(){var c=Tr(this,e),l=c.on,u=c.value[a]==null?s||=hi(t):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function yi(e,t,n){var r=(e+=``)==`transform`?qn:Pr;return t==null?this.styleTween(e,mi(e,r)).on(`end.style.`+e,hi(e)):typeof t==`function`?this.styleTween(e,_i(e,r,Nr(this,`style.`+e,t))).each(vi(this._id,e)):this.styleTween(e,gi(e,r,t),n).on(`end.style.`+e,null)}function bi(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function xi(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&bi(e,a,n)),r}return a._value=t,a}function Si(e,t,n){var r=`style.`+(e+=``);if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=`function`)throw Error();return this.tween(r,xi(e,t,n??``))}function Ci(e){return function(){this.textContent=e}}function wi(e){return function(){this.textContent=e(this)??``}}function Ti(e){return this.tween(`text`,typeof e==`function`?wi(Nr(this,`text`,e)):Ci(e==null?``:e+``))}function Ei(e){return function(t){this.textContent=e.call(this,t)}}function Di(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Ei(r)),t}return r._value=e,r}function Oi(e){var t=`text`;if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!=`function`)throw Error();return this.tween(t,Di(e))}function ki(){for(var e=this._name,t=this._id,n=Pi(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=Er(c,t);Cr(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Mi(r,this._parents,e,n)}function Ai(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var n=Tr(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t}),i===0&&a()})}var ji=0;function Mi(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ni(e){return St().transition(e)}function Pi(){return++ji}var Fi=St.prototype;Mi.prototype=Ni.prototype={constructor:Mi,select:ui,selectAll:di,selectChild:Fi.selectChild,selectChildren:Fi.selectChildren,filter:ri,merge:ii,selection:pi,transition:ki,call:Fi.call,nodes:Fi.nodes,node:Fi.node,size:Fi.size,empty:Fi.empty,each:Fi.each,on:si,attr:Vr,attrTween:Kr,style:yi,styleTween:Si,text:Ti,textTween:Oi,remove:li,tween:Mr,delay:Yr,duration:Qr,ease:ei,easeVarying:ni,end:Ai,[Symbol.iterator]:Fi[Symbol.iterator]};function Ii(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Li={time:null,delay:0,duration:250,ease:Ii};function Ri(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function zi(e){var t,n;e instanceof Mi?(t=e._id,e=e._name):(t=Pi(),(n=Li).time=dr(),e=e==null?null:e+``);for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&Cr(c,e,t,l,o,n||Ri(c,t));return new Mi(r,this._parents,e,t)}St.prototype.interrupt=kr,St.prototype.transition=zi;var Bi=e=>()=>e;function Vi(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Hi(e,t,n){this.k=e,this.x=t,this.y=n}Hi.prototype={constructor:Hi,scale:function(e){return e===1?this:new Hi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Hi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return`translate(`+this.x+`,`+this.y+`) scale(`+this.k+`)`}};var Ui=new Hi(1,0,0);Wi.prototype=Hi.prototype;function Wi(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ui;return e.__zoom}function Gi(e){e.stopImmediatePropagation()}function Ki(e){e.preventDefault(),e.stopImmediatePropagation()}function qi(e){return(!e.ctrlKey||e.type===`wheel`)&&!e.button}function Ji(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute(`viewBox`)?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Yi(){return this.__zoom||Ui}function Xi(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zi(){return navigator.maxTouchPoints||`ontouchstart`in this}function Qi(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function $i(){var e=qi,t=Ji,n=Qi,r=Xi,i=Zi,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=$n,l=h(`start`,`zoom`,`end`),u,d,f,p=500,m=150,g=0,_=10;function v(e){e.property(`__zoom`,Yi).on(`wheel.zoom`,T,{passive:!1}).on(`mousedown.zoom`,E).on(`dblclick.zoom`,D).filter(i).on(`touchstart.zoom`,O).on(`touchmove.zoom`,k).on(`touchend.zoom touchcancel.zoom`,A).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}v.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property(`__zoom`,Yi),e===i?i.interrupt().each(function(){C(this,arguments).event(r).start().zoom(null,typeof t==`function`?t.apply(this,arguments):t).end()}):S(e,t,n,r)},v.scaleBy=function(e,t,n,r){v.scaleTo(e,function(){return this.__zoom.k*(typeof t==`function`?t.apply(this,arguments):t)},n,r)},v.scaleTo=function(e,r,i,a){v.transform(e,function(){var e=t.apply(this,arguments),a=this.__zoom,s=i==null?x(e):typeof i==`function`?i.apply(this,arguments):i,c=a.invert(s),l=typeof r==`function`?r.apply(this,arguments):r;return n(b(y(a,l),s,c),e,o)},i,a)},v.translateBy=function(e,r,i,a){v.transform(e,function(){return n(this.__zoom.translate(typeof r==`function`?r.apply(this,arguments):r,typeof i==`function`?i.apply(this,arguments):i),t.apply(this,arguments),o)},null,a)},v.translateTo=function(e,r,i,a,s){v.transform(e,function(){var e=t.apply(this,arguments),s=this.__zoom,c=a==null?x(e):typeof a==`function`?a.apply(this,arguments):a;return n(Ui.translate(c[0],c[1]).scale(s.k).translate(typeof r==`function`?-r.apply(this,arguments):-r,typeof i==`function`?-i.apply(this,arguments):-i),e,o)},a,s)};function y(e,t){return t=Math.max(a[0],Math.min(a[1],t)),t===e.k?e:new Hi(t,e.x,e.y)}function b(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Hi(e.k,r,i)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function S(e,n,r,i){e.on(`start.zoom`,function(){C(this,arguments).event(i).start()}).on(`interrupt.zoom end.zoom`,function(){C(this,arguments).event(i).end()}).tween(`zoom`,function(){var e=this,a=arguments,o=C(e,a).event(i),s=t.apply(e,a),l=r==null?x(s):typeof r==`function`?r.apply(e,a):r,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,f=typeof n==`function`?n.apply(e,a):n,p=c(d.invert(l).concat(u/d.k),f.invert(l).concat(u/f.k));return function(e){if(e===1)e=f;else{var t=p(e),n=u/t[2];e=new Hi(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function C(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=t.apply(e,n),this.taps=0}w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(`start`)),this},zoom:function(e,t){return this.mouse&&e!==`mouse`&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!==`touch`&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!==`touch`&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit(`zoom`),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(`end`)),this},emit:function(e){var t=K(this.that).datum();l.call(e,this.that,new Vi(e,{sourceEvent:this.sourceEvent,target:v,type:e,transform:this.that.__zoom,dispatch:l}),t)}};function T(t,...i){if(!e.apply(this,arguments))return;var s=C(this,i).event(t),c=this.__zoom,l=Math.max(a[0],Math.min(a[1],c.k*2**r.apply(this,arguments))),u=q(t);if(s.wheel)(s.mouse[0][0]!==u[0]||s.mouse[0][1]!==u[1])&&(s.mouse[1]=c.invert(s.mouse[0]=u)),clearTimeout(s.wheel);else if(c.k===l)return;else s.mouse=[u,c.invert(u)],Or(this),s.start();Ki(t),s.wheel=setTimeout(d,m),s.zoom(`mouse`,n(b(y(c,l),s.mouse[0],s.mouse[1]),s.extent,o));function d(){s.wheel=null,s.end()}}function E(t,...r){if(f||!e.apply(this,arguments))return;var i=t.currentTarget,a=C(this,r,!0).event(t),s=K(t.view).on(`mousemove.zoom`,d,!0).on(`mouseup.zoom`,p,!0),c=q(t,i),l=t.clientX,u=t.clientY;Ot(t.view),Gi(t),a.mouse=[c,this.__zoom.invert(c)],Or(this),a.start();function d(e){if(Ki(e),!a.moved){var t=e.clientX-l,r=e.clientY-u;a.moved=t*t+r*r>g}a.event(e).zoom(`mouse`,n(b(a.that.__zoom,a.mouse[0]=q(e,i),a.mouse[1]),a.extent,o))}function p(e){s.on(`mousemove.zoom mouseup.zoom`,null),kt(e.view,a.moved),Ki(e),a.event(e).end()}}function D(r,...i){if(e.apply(this,arguments)){var a=this.__zoom,c=q(r.changedTouches?r.changedTouches[0]:r,this),l=a.invert(c),u=a.k*(r.shiftKey?.5:2),d=n(b(y(a,u),c,l),t.apply(this,i),o);Ki(r),s>0?K(this).transition().duration(s).call(S,d,c,r):K(this).call(v.transform,d,c,r)}}function O(t,...n){if(e.apply(this,arguments)){var r=t.touches,i=r.length,a=C(this,n,t.changedTouches.length===i).event(t),o,s,c,l;for(Gi(t),s=0;s<i;++s)c=r[s],l=q(c,this),l=[l,this.__zoom.invert(l),c.identifier],a.touch0?!a.touch1&&a.touch0[2]!==l[2]&&(a.touch1=l,a.taps=0):(a.touch0=l,o=!0,a.taps=1+!!u);u&&=clearTimeout(u),o&&(a.taps<2&&(d=l[0],u=setTimeout(function(){u=null},p)),Or(this),a.start())}}function k(e,...t){if(this.__zooming){var r=C(this,t).event(e),i=e.changedTouches,a=i.length,s,c,l,u;for(Ki(e),s=0;s<a;++s)c=i[s],l=q(c,this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=l:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=l);if(c=r.that.__zoom,r.touch1){var d=r.touch0[0],f=r.touch0[1],p=r.touch1[0],m=r.touch1[1],h=(h=p[0]-d[0])*h+(h=p[1]-d[1])*h,g=(g=m[0]-f[0])*g+(g=m[1]-f[1])*g;c=y(c,Math.sqrt(h/g)),l=[(d[0]+p[0])/2,(d[1]+p[1])/2],u=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else if(r.touch0)l=r.touch0[0],u=r.touch0[1];else return;r.zoom(`touch`,n(b(c,l,u),r.extent,o))}}function A(e,...t){if(this.__zooming){var n=C(this,t).event(e),r=e.changedTouches,i=r.length,a,o;for(Gi(e),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),a=0;a<i;++a)o=r[a],n.touch0&&n.touch0[2]===o.identifier?delete n.touch0:n.touch1&&n.touch1[2]===o.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),n.taps===2&&(o=q(o,this),Math.hypot(d[0]-o[0],d[1]-o[1])<_)){var s=K(this).on(`dblclick.zoom`);s&&s.apply(this,arguments)}}}return v.wheelDelta=function(e){return arguments.length?(r=typeof e==`function`?e:Bi(+e),v):r},v.filter=function(t){return arguments.length?(e=typeof t==`function`?t:Bi(!!t),v):e},v.touchable=function(e){return arguments.length?(i=typeof e==`function`?e:Bi(!!e),v):i},v.extent=function(e){return arguments.length?(t=typeof e==`function`?e:Bi([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):t},v.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],v):[a[0],a[1]]},v.translateExtent=function(e){return arguments.length?(o[0][0]=+e[0][0],o[1][0]=+e[1][0],o[0][1]=+e[0][1],o[1][1]=+e[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(e){return arguments.length?(n=e,v):n},v.duration=function(e){return arguments.length?(s=+e,v):s},v.interpolate=function(e){return arguments.length?(c=e,v):c},v.on=function(){var e=l.on.apply(l,arguments);return e===l?v:e},v.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,v):Math.sqrt(g)},v.tapDistance=function(e){return arguments.length?(_=+e,v):_},v}var Y={error001:()=>`[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001`,error002:()=>`It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.`,error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>`The React Flow parent container needs a width and a height to render the graph.`,error005:()=>`Only child nodes can use a parent extent.`,error006:()=>`Can't create edge. An edge needs a source and a target.`,error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e===`source`?n:r}", edge id: ${t}.`,error010:()=>`Handle: No node id found. Make sure to only use a Handle inside a custom Node.`,error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e=`react`)=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>`useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.`,error015:()=>`It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.`},ea=[[-1/0,-1/0],[1/0,1/0]],ta=[`Enter`,` `,`Escape`],na={"node.a11yDescription.default":`Press enter or space to select a node. Press delete to remove it and escape to cancel.`,"node.a11yDescription.keyboardDisabled":`Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.`,"node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":`Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.`,"controls.ariaLabel":`Control Panel`,"controls.zoomIn.ariaLabel":`Zoom In`,"controls.zoomOut.ariaLabel":`Zoom Out`,"controls.fitView.ariaLabel":`Fit View`,"controls.interactive.ariaLabel":`Toggle Interactivity`,"minimap.ariaLabel":`Mini Map`,"handle.ariaLabel":`Handle`},ra;(function(e){e.Strict=`strict`,e.Loose=`loose`})(ra||={});var ia;(function(e){e.Free=`free`,e.Vertical=`vertical`,e.Horizontal=`horizontal`})(ia||={});var aa;(function(e){e.Partial=`partial`,e.Full=`full`})(aa||={});var oa={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null},sa;(function(e){e.Bezier=`default`,e.Straight=`straight`,e.Step=`step`,e.SmoothStep=`smoothstep`,e.SimpleBezier=`simplebezier`})(sa||={});var ca;(function(e){e.Arrow=`arrow`,e.ArrowClosed=`arrowclosed`})(ca||={});var X;(function(e){e.Left=`left`,e.Top=`top`,e.Right=`right`,e.Bottom=`bottom`})(X||={});var la={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top};function ua(e){return e===null?null:e?`valid`:`invalid`}var da=e=>`id`in e&&`source`in e&&`target`in e,fa=e=>`id`in e&&`position`in e&&!(`source`in e)&&!(`target`in e),pa=e=>`id`in e&&`internals`in e&&!(`source`in e)&&!(`target`in e),ma=(e,t=[0,0])=>{let{width:n,height:r}=qa(e),i=e.origin??t,a=n*i[0],o=r*i[1];return{x:e.position.x-a,y:e.position.y-o}},ha=(e,t={nodeOrigin:[0,0]})=>e.length===0?{x:0,y:0,width:0,height:0}:Aa(e.reduce((e,n)=>{let r=typeof n==`string`,i=!t.nodeLookup&&!r?n:void 0;return t.nodeLookup&&(i=r?t.nodeLookup.get(n):pa(n)?n:t.nodeLookup.get(n.id)),Oa(e,i?Ma(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),ga=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(e=>{(t.filter===void 0||t.filter(e))&&(n=Oa(n,Ma(e)),r=!0)}),r?Aa(n):{x:0,y:0,width:0,height:0}},_a=(e,t,[n,r,i]=[0,0,1],a=!1,o=!1)=>{let s={...za(t,[n,r,i]),width:t.width/i,height:t.height/i},c=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(o&&!n||r)continue;let i=e.width??t.width??t.initialWidth??null,l=e.height??t.height??t.initialHeight??null,u=Pa(s,ja(t)),d=(i??0)*(l??0),f=a&&u>0;(!t.internals.handleBounds||f||u>=d||t.dragging)&&c.push(t)}return c},va=(e,t)=>{let n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))};function ya(e,t){let n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden)&&(!r||r.has(e.id))&&n.set(e.id,e)}),n}async function ba({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:a},o){if(e.size===0)return Promise.resolve(!0);let s=Wa(ga(ya(e,o)),t,n,o?.minZoom??i,o?.maxZoom??a,o?.padding??.1);return await r.setViewport(s,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function xa({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:a}){let o=n.get(e),s=o.parentId?n.get(o.parentId):void 0,{x:c,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},u=o.origin??r,d=o.extent||i;if(o.extent===`parent`&&!o.expandParent)if(!s)a?.(`005`,Y.error005());else{let e=s.measured.width,t=s.measured.height;e&&t&&(d=[[c,l],[c+e,l+t]])}else s&&Ka(o.extent)&&(d=[[o.extent[0][0]+c,o.extent[0][1]+l],[o.extent[1][0]+c,o.extent[1][1]+l]]);let f=Ka(d)?wa(t,d,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&a?.(`015`,Y.error015()),{position:{x:f.x-c+(o.measured.width??0)*u[0],y:f.y-l+(o.measured.height??0)*u[1]},positionAbsolute:f}}async function Sa({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){let a=new Set(e.map(e=>e.id)),o=[];for(let e of n){if(e.deletable===!1)continue;let t=a.has(e.id),n=!t&&e.parentId&&o.find(t=>t.id===e.parentId);(t||n)&&o.push(e)}let s=new Set(t.map(e=>e.id)),c=r.filter(e=>e.deletable!==!1),l=va(o,c);for(let e of c)s.has(e.id)&&!l.find(t=>t.id===e.id)&&l.push(e);if(!i)return{edges:l,nodes:o};let u=await i({nodes:o,edges:l});return typeof u==`boolean`?u?{edges:l,nodes:o}:{edges:[],nodes:[]}:u}var Ca=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),wa=(e={x:0,y:0},t,n)=>({x:Ca(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Ca(e.y,t[0][1],t[1][1]-(n?.height??0))});function Ta(e,t,n){let{width:r,height:i}=qa(n),{x:a,y:o}=n.internals.positionAbsolute;return wa(e,[[a,o],[a+r,o+i]],t)}var Ea=(e,t,n)=>e<t?Ca(Math.abs(e-t),1,t)/t:e>n?-Ca(Math.abs(e-n),1,t)/t:0,Da=(e,t,n=15,r=40)=>[Ea(e.x,r,t.width-r)*n,Ea(e.y,r,t.height-r)*n],Oa=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ka=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Aa=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ja=(e,t=[0,0])=>{let{x:n,y:r}=pa(e)?e.internals.positionAbsolute:ma(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ma=(e,t=[0,0])=>{let{x:n,y:r}=pa(e)?e.internals.positionAbsolute:ma(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},Na=(e,t)=>Aa(Oa(ka(e),ka(t))),Pa=(e,t)=>{let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Fa=e=>Ia(e.width)&&Ia(e.height)&&Ia(e.x)&&Ia(e.y),Ia=e=>!isNaN(e)&&isFinite(e),La=(e,t)=>{},Ra=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),za=({x:e,y:t},[n,r,i],a=!1,o=[1,1])=>{let s={x:(e-n)/i,y:(t-r)/i};return a?Ra(s,o):s},Ba=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Va(e,t){if(typeof e==`number`)return Math.floor((t-t/(1+e))*.5);if(typeof e==`string`&&e.endsWith(`px`)){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if(typeof e==`string`&&e.endsWith(`%`)){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Ha(e,t,n){if(typeof e==`string`||typeof e==`number`){let r=Va(e,n),i=Va(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e==`object`){let r=Va(e.top??e.y??0,n),i=Va(e.bottom??e.y??0,n),a=Va(e.left??e.x??0,t),o=Va(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:a,x:a+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Ua(e,t,n,r,i,a){let{x:o,y:s}=Ba(e,[t,n,r]),{x:c,y:l}=Ba({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=i-c,d=a-l;return{left:Math.floor(o),top:Math.floor(s),right:Math.floor(u),bottom:Math.floor(d)}}var Wa=(e,t,n,r,i,a)=>{let o=Ha(a,t,n),s=(t-o.x)/e.width,c=(n-o.y)/e.height,l=Ca(Math.min(s,c),r,i),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,p=n/2-d*l,m=Ua(e,f,p,l,t,n),h={left:Math.min(m.left-o.left,0),top:Math.min(m.top-o.top,0),right:Math.min(m.right-o.right,0),bottom:Math.min(m.bottom-o.bottom,0)};return{x:f-h.left+h.right,y:p-h.top+h.bottom,zoom:l}},Ga=()=>typeof navigator<`u`&&navigator?.userAgent?.indexOf(`Mac`)>=0;function Ka(e){return e!=null&&e!==`parent`}function qa(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Ja(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Ya(e,t={width:0,height:0},n,r,i){let a={...e},o=r.get(n);if(o){let e=o.origin||i;a.x+=o.internals.positionAbsolute.x-(t.width??0)*e[0],a.y+=o.internals.positionAbsolute.y-(t.height??0)*e[1]}return a}function Xa(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function Za(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}function Qa(e){return{...na,...e||{}}}function $a(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){let{x:a,y:o}=ao(e),s=za({x:a-(i?.left??0),y:o-(i?.top??0)},r),{x:c,y:l}=n?Ra(s,t):s;return{xSnapped:c,ySnapped:l,...s}}var eo=e=>({width:e.offsetWidth,height:e.offsetHeight}),to=e=>e?.getRootNode?.()||window?.document,no=[`INPUT`,`SELECT`,`TEXTAREA`];function ro(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1?no.includes(t.nodeName)||t.hasAttribute(`contenteditable`)||!!t.closest(`.nokey`):!1}var io=e=>`clientX`in e,ao=(e,t)=>{let n=io(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},oo=(e,t,n,r,i)=>{let a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(t=>{let a=t.getBoundingClientRect();return{id:t.getAttribute(`data-handleid`),type:e,nodeId:i,position:t.getAttribute(`data-handlepos`),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...eo(t)}})};function so({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:o,targetControlY:s}){let c=e*.125+i*.375+o*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125;return[c,l,Math.abs(c-e),Math.abs(l-t)]}function co(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function lo({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case X.Left:return[t-co(t-r,a),n];case X.Right:return[t+co(r-t,a),n];case X.Top:return[t,n-co(n-i,a)];case X.Bottom:return[t,n+co(i-n,a)]}}function uo({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:r,targetY:i,targetPosition:a=X.Top,curvature:o=.25}){let[s,c]=lo({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[l,u]=lo({pos:a,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,p,m]=so({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${i}`,d,f,p,m]}function fo({sourceX:e,sourceY:t,targetX:n,targetY:r}){let i=Math.abs(n-e)/2,a=n<e?n+i:n-i,o=Math.abs(r-t)/2;return[a,r<t?r+o:r-o,i,o]}function po({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:a=`basic`}){return a===`manual`?r:(i&&n?r+1e3:r)+Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0)}function mo({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){let a=Oa(Ma(e),Ma(t));return a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1),Pa({x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]},Aa(a))>0}var ho=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||``}-${n}${r||``}`,go=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),_o=(e,t,n={})=>{if(!e.source||!e.target)return Y.error006(),t;let r=n.getEdgeId||ho,i;return i=da(e)?{...e}:{...e,id:r(e)},go(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function vo({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[i,a,o,s]=fo({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,o,s]}var yo={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}},bo=({source:e,sourcePosition:t=X.Bottom,target:n})=>t===X.Left||t===X.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},xo=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function So({source:e,sourcePosition:t=X.Bottom,target:n,targetPosition:r=X.Top,center:i,offset:a,stepPosition:o}){let s=yo[t],c=yo[r],l={x:e.x+s.x*a,y:e.y+s.y*a},u={x:n.x+c.x*a,y:n.y+c.y*a},d=bo({source:l,sourcePosition:t,target:u}),f=d.x===0?`y`:`x`,p=d[f],m=[],h,g,_={x:0,y:0},v={x:0,y:0},[,,y,b]=fo({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*c[f]===-1){f===`x`?(h=i.x??l.x+(u.x-l.x)*o,g=i.y??(l.y+u.y)/2):(h=i.x??(l.x+u.x)/2,g=i.y??l.y+(u.y-l.y)*o);let e=[{x:h,y:l.y},{x:h,y:u.y}],t=[{x:l.x,y:g},{x:u.x,y:g}];m=s[f]===p?f===`x`?e:t:f===`x`?t:e}else{let i=[{x:l.x,y:u.y}],o=[{x:u.x,y:l.y}];if(m=f===`x`?s.x===p?o:i:s.y===p?i:o,t===r){let t=Math.abs(e[f]-n[f]);if(t<=a){let r=Math.min(a-1,a-t);s[f]===p?_[f]=(l[f]>e[f]?-1:1)*r:v[f]=(u[f]>n[f]?-1:1)*r}}if(t!==r){let e=f===`x`?`y`:`x`,t=s[f]===c[e],n=l[e]>u[e],r=l[e]<u[e];(s[f]===1&&(!t&&n||t&&r)||s[f]!==1&&(!t&&r||t&&n))&&(m=f===`x`?i:o)}let d={x:l.x+_.x,y:l.y+_.y},y={x:u.x+v.x,y:u.y+v.y};Math.max(Math.abs(d.x-m[0].x),Math.abs(y.x-m[0].x))>=Math.max(Math.abs(d.y-m[0].y),Math.abs(y.y-m[0].y))?(h=(d.x+y.x)/2,g=m[0].y):(h=m[0].x,g=(d.y+y.y)/2)}return[[e,{x:l.x+_.x,y:l.y+_.y},...m,{x:u.x+v.x,y:u.y+v.y},n],h,g,y,b]}function Co(e,t,n,r){let i=Math.min(xo(e,t)/2,xo(t,n)/2,r),{x:a,y:o}=t;if(e.x===a&&a===n.x||e.y===o&&o===n.y)return`L${a} ${o}`;if(e.y===o){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+i*t},${o}Q ${a},${o} ${a},${o+i*r}`}let s=e.x<n.x?1:-1;return`L ${a},${o+i*(e.y<n.y?-1:1)}Q ${a},${o} ${a+i*s},${o}`}function wo({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:r,targetY:i,targetPosition:a=X.Top,borderRadius:o=5,centerX:s,centerY:c,offset:l=20,stepPosition:u=.5}){let[d,f,p,m,h]=So({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:s,y:c},offset:l,stepPosition:u});return[d.reduce((e,t,n)=>{let r=``;return r=n>0&&n<d.length-1?Co(d[n-1],t,d[n+1],o):`${n===0?`M`:`L`}${t.x} ${t.y}`,e+=r,e},``),f,p,m,h]}function To(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Eo(e){let{sourceNode:t,targetNode:n}=e;if(!To(t)||!To(n))return null;let r=t.internals.handleBounds||Do(t.handles),i=n.internals.handleBounds||Do(n.handles),a=ko(r?.source??[],e.sourceHandle),o=ko(e.connectionMode===ra.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!a||!o)return e.onError?.(`008`,Y.error008(a?`target`:`source`,{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let s=a?.position||X.Bottom,c=o?.position||X.Top,l=Oo(t,a,s),u=Oo(n,o,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function Do(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,r.type===`source`?t.push(r):r.type===`target`&&n.push(r);return{source:t,target:n}}function Oo(e,t,n=X.Left,r=!1){let i=(t?.x??0)+e.internals.positionAbsolute.x,a=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:s}=t??qa(e);if(r)return{x:i+o/2,y:a+s/2};switch(t?.position??n){case X.Top:return{x:i+o/2,y:a};case X.Right:return{x:i+o,y:a+s/2};case X.Bottom:return{x:i+o/2,y:a+s};case X.Left:return{x:i,y:a+s/2}}}function ko(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function Ao(e,t){return e?typeof e==`string`?e:`${t?`${t}__`:``}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join(`&`)}`:``}function jo(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){let a=new Set;return e.reduce((e,o)=>([o.markerStart||r,o.markerEnd||i].forEach(r=>{if(r&&typeof r==`object`){let i=Ao(r,t);a.has(i)||(e.push({id:i,color:r.color||n,...r}),a.add(i))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}var Mo=1e3,No=10,Po={nodeOrigin:[0,0],nodeExtent:ea,elevateNodesOnSelect:!0,zIndexMode:`basic`,defaults:{}},Fo={...Po,checkEquality:!0};function Io(e,t){let n={...e};for(let e in t)t[e]!==void 0&&(n[e]=t[e]);return n}function Lo(e,t,n){let r=Io(Po,n);for(let n of e.values())if(n.parentId)Ho(n,e,t,r);else{let e=wa(ma(n,r.nodeOrigin),Ka(n.extent)?n.extent:r.nodeExtent,qa(n));n.internals.positionAbsolute=e}}function Ro(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;let n=[],r=[];for(let t of e.handles){let i={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};t.type===`source`?n.push(i):t.type===`target`&&r.push(i)}return{source:n,target:r}}function zo(e){return e===`manual`}function Bo(e,t,n,r={}){let i=Io(Fo,r),a={i:0},o=new Map(t),s=i?.elevateNodesOnSelect&&!zo(i.zIndexMode)?Mo:0,c=e.length>0;t.clear(),n.clear();for(let l of e){let e=o.get(l.id);if(i.checkEquality&&l===e?.internals.userNode)t.set(l.id,e);else{let n=wa(ma(l,i.nodeOrigin),Ka(l.extent)?l.extent:i.nodeExtent,qa(l));e={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:n,handleBounds:Ro(l,e),z:Uo(l,s,i.zIndexMode),userNode:l}},t.set(l.id,e)}(e.measured===void 0||e.measured.width===void 0||e.measured.height===void 0)&&!e.hidden&&(c=!1),l.parentId&&Ho(e,t,n,r,a)}return c}function Vo(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ho(e,t,n,r,i){let{elevateNodesOnSelect:a,nodeOrigin:o,nodeExtent:s,zIndexMode:c}=Io(Po,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Vo(e,n),i&&!u.parentId&&u.internals.rootParentIndex===void 0&&c===`auto`&&(u.internals.rootParentIndex=++i.i,u.internals.z=u.internals.z+i.i*No),i&&u.internals.rootParentIndex!==void 0&&(i.i=u.internals.rootParentIndex);let{x:d,y:f,z:p}=Wo(e,u,o,s,a&&!zo(c)?Mo:0,c),{positionAbsolute:m}=e.internals,h=d!==m.x||f!==m.y;(h||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:h?{x:d,y:f}:m,z:p}})}function Uo(e,t,n){let r=Ia(e.zIndex)?e.zIndex:0;return zo(n)?r:r+(e.selected?t:0)}function Wo(e,t,n,r,i,a){let{x:o,y:s}=t.internals.positionAbsolute,c=qa(e),l=ma(e,n),u=Ka(e.extent)?wa(l,e.extent,c):l,d=wa({x:o+u.x,y:s+u.y},r,c);e.extent===`parent`&&(d=Ta(d,c,t));let f=Uo(e,i,a),p=t.internals.z??0;return{x:d.x,y:d.y,z:p>=f?p+1:f}}function Go(e,t,n,r=[0,0]){let i=[],a=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=Na(a.get(n.parentId)?.expandedRect??ja(e),n.rect);a.set(n.parentId,{expandedRect:r,parent:e})}return a.size>0&&a.forEach(({expandedRect:t,parent:a},o)=>{let s=a.internals.positionAbsolute,c=qa(a),l=a.origin??r,u=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,d=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,f=Math.max(c.width,Math.round(t.width)),p=Math.max(c.height,Math.round(t.height)),m=(f-c.width)*l[0],h=(p-c.height)*l[1];(u>0||d>0||m||h)&&(i.push({id:o,type:`position`,position:{x:a.position.x-u+m,y:a.position.y-d+h}}),n.get(o)?.forEach(t=>{e.some(e=>e.id===t.id)||i.push({id:t.id,type:`position`,position:{x:t.position.x+u,y:t.position.y+d}})})),(c.width<t.width||c.height<t.height||u||d)&&i.push({id:o,type:`dimensions`,setAttributes:!0,dimensions:{width:f+(u?l[0]*u-m:0),height:p+(d?l[1]*d-h:0)}})}),i}function Ko(e,t,n,r,i,a,o){let s=r?.querySelector(`.xyflow__viewport`),c=!1;if(!s)return{changes:[],updatedInternals:c};let l=[],u=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(u.transform),f=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),c=!0;continue}let s=eo(r.nodeElement),u=e.measured.width!==s.width||e.measured.height!==s.height;if(s.width&&s.height&&(u||!e.internals.handleBounds||r.force)){let p=r.nodeElement.getBoundingClientRect(),m=Ka(e.extent)?e.extent:a,{positionAbsolute:h}=e.internals;e.parentId&&e.extent===`parent`?h=Ta(h,s,t.get(e.parentId)):m&&(h=wa(h,m,s));let g={...e,measured:s,internals:{...e.internals,positionAbsolute:h,handleBounds:{source:oo(`source`,r.nodeElement,p,d,e.id),target:oo(`target`,r.nodeElement,p,d,e.id)}}};t.set(e.id,g),e.parentId&&Ho(g,t,n,{nodeOrigin:i,zIndexMode:o}),c=!0,u&&(l.push({id:e.id,type:`dimensions`,dimensions:s}),e.expandParent&&e.parentId&&f.push({id:e.id,parentId:e.parentId,rect:ja(g,i)}))}}if(f.length>0){let e=Go(f,t,n,i);l.push(...e)}return{changes:l,updatedInternals:c}}async function qo({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,a]],r),s=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(s)}function Jo(e,t,n,r,i,a){let o=i,s=r.get(o)||new Map;r.set(o,s.set(n,t)),o=`${i}-${e}`;let c=r.get(o)||new Map;if(r.set(o,c.set(n,t)),a){o=`${i}-${e}-${a}`;let s=r.get(o)||new Map;r.set(o,s.set(n,t))}}function Yo(e,t,n){e.clear(),t.clear();for(let r of n){let{source:n,target:i,sourceHandle:a=null,targetHandle:o=null}=r,s={edgeId:r.id,source:n,target:i,sourceHandle:a,targetHandle:o},c=`${n}-${a}--${i}-${o}`;Jo(`source`,s,`${i}-${o}--${n}-${a}`,e,n,a),Jo(`target`,s,c,e,i,o),t.set(r.id,r)}}function Xo(e,t){if(!e.parentId)return!1;let n=t.get(e.parentId);return n?n.selected?!0:Xo(n,t):!1}function Zo(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Qo(e,t,n,r){let i=new Map;for(let[a,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!Xo(o,e))&&(o.draggable||t&&o.draggable===void 0)){let t=e.get(a);t&&i.set(a,{id:a,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return i}function $o({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let i=[];for(let[e,a]of t){let t=n.get(e)?.internals.userNode;t&&i.push({...t,position:a.position,dragging:r})}if(!e)return[i[0],i];let a=n.get(e)?.internals.userNode;return[a?{...a,position:t.get(e)?.position||a.position,dragging:r}:i[0],i]}function es({dragItems:e,snapGrid:t,x:n,y:r}){let i=e.values().next().value;if(!i)return null;let a={x:n-i.distance.x,y:r-i.distance.y},o=Ra(a,t);return{x:o.x-a.x,y:o.y-a.y}}function ts({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let a={x:null,y:null},o=0,s=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,p=!1,m=!1,h=null;function g({noDragClassName:g,handleSelector:_,domNode:v,isSelectable:y,nodeId:b,nodeClickDistance:x=0}){f=K(v);function S({x:e,y:n}){let{nodeLookup:i,nodeExtent:o,snapGrid:c,snapToGrid:l,nodeOrigin:u,onNodeDrag:d,onSelectionDrag:f,onError:p,updateNodePositions:g}=t();a={x:e,y:n};let _=!1,v=s.size>1,y=v&&o?ka(ga(s)):null,x=v&&l?es({dragItems:s,snapGrid:c,x:e,y:n}):null;for(let[t,r]of s){if(!i.has(t))continue;let a={x:e-r.distance.x,y:n-r.distance.y};l&&(a=x?{x:Math.round(a.x+x.x),y:Math.round(a.y+x.y)}:Ra(a,c));let s=null;if(v&&o&&!r.extent&&y){let{positionAbsolute:e}=r.internals,t=e.x-y.x+o[0][0],n=e.x+r.measured.width-y.x2+o[1][0],i=e.y-y.y+o[0][1],a=e.y+r.measured.height-y.y2+o[1][1];s=[[t,i],[n,a]]}let{position:d,positionAbsolute:f}=xa({nodeId:t,nextPosition:a,nodeLookup:i,nodeExtent:s||o,nodeOrigin:u,onError:p});_=_||r.position.x!==d.x||r.position.y!==d.y,r.position=d,r.internals.positionAbsolute=f}if(m||=_,_&&(g(s,!0),h&&(r||d||!b&&f))){let[e,t]=$o({nodeId:b,dragItems:s,nodeLookup:i});r?.(h,s,e,t),d?.(h,e,t),b||f?.(h,t)}}async function C(){if(!u)return;let{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:i}=t();if(!i){c=!1,cancelAnimationFrame(o);return}let[s,d]=Da(l,u,r);(s!==0||d!==0)&&(a.x=(a.x??0)-s/e[2],a.y=(a.y??0)-d/e[2],await n({x:s,y:d})&&S(a)),o=requestAnimationFrame(C)}function w(r){let{nodeLookup:i,multiSelectionActive:o,nodesDraggable:c,transform:l,snapGrid:f,snapToGrid:p,selectNodesOnDrag:m,onNodeDragStart:h,onSelectionDragStart:g,unselectNodesAndEdges:_}=t();d=!0,(!m||!y)&&!o&&b&&(i.get(b)?.selected||_()),y&&m&&b&&e?.(b);let v=$a(r.sourceEvent,{transform:l,snapGrid:f,snapToGrid:p,containerBounds:u});if(a=v,s=Qo(i,c,v,b),s.size>0&&(n||h||!b&&g)){let[e,t]=$o({nodeId:b,dragItems:s,nodeLookup:i});n?.(r.sourceEvent,s,e,t),h?.(r.sourceEvent,e,t),b||g?.(r.sourceEvent,t)}}let T=It().clickDistance(x).on(`start`,e=>{let{domNode:n,nodeDragThreshold:r,transform:i,snapGrid:o,snapToGrid:s}=t();u=n?.getBoundingClientRect()||null,p=!1,m=!1,h=e.sourceEvent,r===0&&w(e),a=$a(e.sourceEvent,{transform:i,snapGrid:o,snapToGrid:s,containerBounds:u}),l=ao(e.sourceEvent,u)}).on(`drag`,e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:i,snapToGrid:o,nodeDragThreshold:f,nodeLookup:m}=t(),g=$a(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:o,containerBounds:u});if(h=e.sourceEvent,(e.sourceEvent.type===`touchmove`&&e.sourceEvent.touches.length>1||b&&!m.has(b))&&(p=!0),!p){if(!c&&n&&d&&(c=!0,C()),!d){let t=ao(e.sourceEvent,u),n=t.x-l.x,r=t.y-l.y;Math.sqrt(n*n+r*r)>f&&w(e)}(a.x!==g.xSnapped||a.y!==g.ySnapped)&&s&&d&&(l=ao(e.sourceEvent,u),S(g))}}).on(`end`,e=>{if(!(!d||p)&&(c=!1,d=!1,cancelAnimationFrame(o),s.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:a,onSelectionDragStop:o}=t();if(m&&=(r(s,!1),!1),i||a||!b&&o){let[t,r]=$o({nodeId:b,dragItems:s,nodeLookup:n,dragging:!1});i?.(e.sourceEvent,s,t,r),a?.(e.sourceEvent,t,r),b||o?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!g||!Zo(t,`.${g}`,v))&&(!_||Zo(t,_,v))});f.call(T)}function _(){f?.on(`.drag`,null)}return{update:g,destroy:_}}function ns(e,t,n){let r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(let e of t.values())Pa(i,ja(e))>0&&r.push(e);return r}var rs=250;function is(e,t,n,r){let i=[],a=1/0,o=ns(e,n,t+rs);for(let n of o){let o=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(let s of o){if(r.nodeId===s.nodeId&&r.type===s.type&&r.id===s.id)continue;let{x:o,y:c}=Oo(n,s,s.position,!0),l=Math.sqrt((o-e.x)**2+(c-e.y)**2);l>t||(l<a?(i=[{...s,x:o,y:c}],a=l):l===a&&i.push({...s,x:o,y:c}))}}if(!i.length)return null;if(i.length>1){let e=r.type===`source`?`target`:`source`;return i.find(t=>t.type===e)??i[0]}return i[0]}function as(e,t,n,r,i,a=!1){let o=r.get(e);if(!o)return null;let s=i===`strict`?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],c=(n?s?.find(e=>e.id===n):s?.[0])??null;return c&&a?{...c,...Oo(o,c,c.position,!0)}:c}function os(e,t){return e||(t?.classList.contains(`target`)?`target`:t?.classList.contains(`source`)?`source`:null)}function ss(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}var cs=()=>!0;function ls(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:a,isTarget:o,domNode:s,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:p,onConnectStart:m,onConnect:h,onConnectEnd:g,isValidConnection:_=cs,onReconnectEnd:v,updateConnection:y,getTransform:b,getFromHandle:x,autoPanSpeed:S,dragThreshold:C=1,handleDomNode:w}){let T=to(e.target),E=0,D,{x:O,y:k}=ao(e),A=os(a,w),j=s?.getBoundingClientRect(),M=!1;if(!j||!A)return;let N=as(i,A,r,c,t);if(!N)return;let P=ao(e,j),F=!1,I=null,L=!1,R=null;function z(){if(!u||!j)return;let[e,t]=Da(P,j,S);f({x:e,y:t}),E=requestAnimationFrame(z)}let B={...N,nodeId:i,type:A,position:N.position},V=c.get(i),H={inProgress:!0,isValid:null,from:Oo(V,B,X.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:V,to:P,toHandle:null,toPosition:la[B.position],toNode:null,pointer:P};function ee(){M=!0,y(H),m?.(e,{nodeId:i,handleId:r,handleType:A})}C===0&&ee();function U(e){if(!M){let{x:t,y:n}=ao(e),r=t-O,i=n-k;if(!(r*r+i*i>C*C))return;ee()}if(!x()||!B){W(e);return}let a=b();P=ao(e,j),D=is(za(P,a,!1,[1,1]),n,c,B),F||=(z(),!0);let s=us(e,{handle:D,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?`target`:`source`,isValidConnection:_,doc:T,lib:l,flowId:d,nodeLookup:c});R=s.handleDomNode,I=s.connection,L=ss(!!D,s.isValid);let u=c.get(i),f=u?Oo(u,B,X.Left,!0):H.from,p={...H,from:f,isValid:L,to:s.toHandle&&L?Ba({x:s.toHandle.x,y:s.toHandle.y},a):P,toHandle:s.toHandle,toPosition:L&&s.toHandle?s.toHandle.position:la[B.position],toNode:s.toHandle?c.get(s.toHandle.nodeId):null,pointer:P};y(p),H=p}function W(e){if(!(`touches`in e&&e.touches.length>0)){if(M){(D||R)&&I&&L&&h?.(I);let{inProgress:t,...n}=H,r={...n,toPosition:H.toHandle?H.toPosition:null};g?.(e,r),a&&v?.(e,r)}p(),cancelAnimationFrame(E),F=!1,L=!1,I=null,R=null,T.removeEventListener(`mousemove`,U),T.removeEventListener(`mouseup`,W),T.removeEventListener(`touchmove`,U),T.removeEventListener(`touchend`,W)}}T.addEventListener(`mousemove`,U),T.addEventListener(`mouseup`,W),T.addEventListener(`touchmove`,U),T.addEventListener(`touchend`,W)}function us(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:a,doc:o,lib:s,flowId:c,isValidConnection:l=cs,nodeLookup:u}){let d=a===`target`,f=t?o.querySelector(`.${s}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:p,y:m}=ao(e),h=o.elementFromPoint(p,m),g=h?.classList.contains(`${s}-flow__handle`)?h:f,_={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){let e=os(void 0,g),t=g.getAttribute(`data-nodeid`),a=g.getAttribute(`data-handleid`),o=g.classList.contains(`connectable`),s=g.classList.contains(`connectableend`);if(!t||!e)return _;let c={source:d?t:r,sourceHandle:d?a:i,target:d?r:t,targetHandle:d?i:a};_.connection=c,_.isValid=o&&s&&(n===ra.Strict?d&&e===`source`||!d&&e===`target`:t!==r||a!==i)&&l(c),_.toHandle=as(t,e,a,u,n,!0)}return _}var ds={onPointerDown:ls,isValid:us};function fs({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let i=K(e);function a({translateExtent:e,width:a,height:o,zoomStep:s=1,pannable:c=!0,zoomable:l=!0,inversePan:u=!1}){let d=e=>{if(e.sourceEvent.type!==`wheel`||!t)return;let r=n(),i=e.sourceEvent.ctrlKey&&Ga()?10:1,a=-e.sourceEvent.deltaY*(e.sourceEvent.deltaMode===1?.05:e.sourceEvent.deltaMode?1:.002)*s,o=r[2]*2**(a*i);t.scaleTo(o)},f=[0,0],p=$i().on(`start`,e=>{(e.sourceEvent.type===`mousedown`||e.sourceEvent.type===`touchstart`)&&(f=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on(`zoom`,c?i=>{let s=n();if(i.sourceEvent.type!==`mousemove`&&i.sourceEvent.type!==`touchmove`||!t)return;let c=[i.sourceEvent.clientX??i.sourceEvent.touches[0].clientX,i.sourceEvent.clientY??i.sourceEvent.touches[0].clientY],l=[c[0]-f[0],c[1]-f[1]];f=c;let d=r()*Math.max(s[2],Math.log(s[2]))*(u?-1:1),p={x:s[0]-l[0]*d,y:s[1]-l[1]*d},m=[[0,0],[a,o]];t.setViewportConstrained({x:p.x,y:p.y,zoom:s[2]},m,e)}:null).on(`zoom.wheel`,l?d:null);i.call(p,{})}function o(){i.on(`zoom`,null)}return{update:a,destroy:o,pointer:q}}var ps=e=>({x:e.x,y:e.y,zoom:e.k}),ms=({x:e,y:t,zoom:n})=>Ui.translate(e,t).scale(n),hs=(e,t)=>e.target.closest(`.${t}`),gs=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),_s=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,vs=(e,t=0,n=_s,r=()=>{})=>{let i=typeof t==`number`&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on(`end`,r):e},ys=e=>{let t=e.ctrlKey&&Ga()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function bs({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:o,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(hs(u,t))return u.ctrlKey&&u.preventDefault(),!1;u.preventDefault(),u.stopImmediatePropagation();let d=n.property(`__zoom`).k||1;if(u.ctrlKey&&o){let e=q(u),t=d*2**ys(u);r.scaleTo(n,t,e,u);return}let f=u.deltaMode===1?20:1,p=i===ia.Vertical?0:u.deltaX*f,m=i===ia.Horizontal?0:u.deltaY*f;!Ga()&&u.shiftKey&&i!==ia.Vertical&&(p=u.deltaY*f,m=0),r.translateBy(n,-(p/d)*a,-(m/d)*a,{internal:!0});let h=ps(n.property(`__zoom`));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(c?.(u,h),e.panScrollTimeout=setTimeout(()=>{l?.(u,h),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,s?.(u,h))}}function xs({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){let a=r.type===`wheel`,o=!t&&a&&!r.ctrlKey,s=hs(r,e);if(r.ctrlKey&&a&&s&&r.preventDefault(),o||s)return null;r.preventDefault(),n.call(this,r,i)}}function Ss({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let i=ps(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type===`mousedown`&&t(!0),n&&n?.(r.sourceEvent,i)}}function Cs({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return a=>{e.usedRightMouseButton=!!(n&&gs(t,e.mouseButton??0)),a.sourceEvent?.sync||r([a.transform.x,a.transform.y,a.transform.k]),i&&!a.sourceEvent?.internal&&i?.(a.sourceEvent,ps(a.transform))}}function ws({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:a}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&gs(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&a(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){let t=ps(o.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,t)},n?150:0)}}}function Ts({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:o,noWheelClassName:s,noPanClassName:c,lib:l,connectionInProgress:u}){return d=>{let f=e||t,p=n&&d.ctrlKey,m=d.type===`wheel`;if(d.button===1&&d.type===`mousedown`&&(hs(d,`${l}-flow__node`)||hs(d,`${l}-flow__edge`)))return!0;if(!r&&!f&&!i&&!a&&!n||o||u&&!m||hs(d,s)&&m||hs(d,c)&&(!m||i&&m&&!e)||!n&&d.ctrlKey&&m)return!1;if(!n&&d.type===`touchstart`&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!i&&!p&&m||!r&&(d.type===`mousedown`||d.type===`touchstart`)||Array.isArray(r)&&!r.includes(d.button)&&d.type===`mousedown`)return!1;let h=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||m)&&h}}function Es({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:o,onPanZoomEnd:s,onDraggingChange:c}){let l={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),d=$i().scaleExtent([t,n]).translateExtent(r),f=K(e).call(d);v({x:i.x,y:i.y,zoom:Ca(i.zoom,t,n)},[[0,0],[u.width,u.height]],r);let p=f.on(`wheel.zoom`),m=f.on(`dblclick.zoom`);d.wheelDelta(ys);function h(e,t){return f?new Promise(n=>{d?.interpolate(t?.interpolate===`linear`?zn:$n).transform(vs(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function g({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:i,panOnDrag:u,panOnScrollMode:h,panOnScrollSpeed:g,preventScrolling:v,zoomOnPinch:y,zoomOnScroll:b,zoomOnDoubleClick:x,zoomActivationKeyPressed:S,lib:C,onTransformChange:w,connectionInProgress:T,paneClickDistance:E,selectionOnDrag:D}){r&&!l.isZoomingOrPanning&&_();let O=i&&!S&&!r;d.clickDistance(D?1/0:!Ia(E)||E<0?0:E);let k=O?bs({zoomPanValues:l,noWheelClassName:e,d3Selection:f,d3Zoom:d,panOnScrollMode:h,panOnScrollSpeed:g,zoomOnPinch:y,onPanZoomStart:o,onPanZoom:a,onPanZoomEnd:s}):xs({noWheelClassName:e,preventScrolling:v,d3ZoomHandler:p});if(f.on(`wheel.zoom`,k,{passive:!1}),!r){let e=Ss({zoomPanValues:l,onDraggingChange:c,onPanZoomStart:o});d.on(`start`,e);let t=Cs({zoomPanValues:l,panOnDrag:u,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:w});d.on(`zoom`,t);let r=ws({zoomPanValues:l,panOnDrag:u,panOnScroll:i,onPaneContextMenu:n,onPanZoomEnd:s,onDraggingChange:c});d.on(`end`,r)}let A=Ts({zoomActivationKeyPressed:S,panOnDrag:u,zoomOnScroll:b,panOnScroll:i,zoomOnDoubleClick:x,zoomOnPinch:y,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:C,connectionInProgress:T});d.filter(A),x?f.on(`dblclick.zoom`,m):f.on(`dblclick.zoom`,null)}function _(){d.on(`zoom`,null)}async function v(e,t,n){let r=ms(e),i=d?.constrain()(r,t,n);return i&&await h(i),new Promise(e=>e(i))}async function y(e,t){let n=ms(e);return await h(n,t),new Promise(e=>e(n))}function b(e){if(f){let t=ms(e),n=f.property(`__zoom`);(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&d?.transform(f,t,null,{sync:!0})}}function x(){let e=f?Wi(f.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}}function S(e,t){return f?new Promise(n=>{d?.interpolate(t?.interpolate===`linear`?zn:$n).scaleTo(vs(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function C(e,t){return f?new Promise(n=>{d?.interpolate(t?.interpolate===`linear`?zn:$n).scaleBy(vs(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function w(e){d?.scaleExtent(e)}function T(e){d?.translateExtent(e)}function E(e){let t=!Ia(e)||e<0?0:e;d?.clickDistance(t)}return{update:g,destroy:_,setViewport:y,setViewportConstrained:v,getViewport:x,scaleTo:S,scaleBy:C,setScaleExtent:w,setTranslateExtent:T,syncViewport:b,setClickDistance:E}}var Ds;(function(e){e.Line=`line`,e.Handle=`handle`})(Ds||={});function Os({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:a}){let o=e-t,s=n-r,c=[o>0?1:o<0?-1:0,s>0?1:s<0?-1:0];return o&&i&&(c[0]*=-1),s&&a&&(c[1]*=-1),c}function ks(e){return{isHorizontal:e.includes(`right`)||e.includes(`left`),isVertical:e.includes(`bottom`)||e.includes(`top`),affectsX:e.includes(`left`),affectsY:e.includes(`top`)}}function As(e,t){return Math.max(0,t-e)}function js(e,t){return Math.max(0,e-t)}function Ms(e,t,n){return Math.max(0,t-e,e-n)}function Ns(e,t){return e?!t:t}function Ps(e,t,n,r,i,a,o,s){let{affectsX:c,affectsY:l}=t,{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:p,ySnapped:m}=n,{minWidth:h,maxWidth:g,minHeight:_,maxHeight:v}=r,{x:y,y:b,width:x,height:S,aspectRatio:C}=e,w=Math.floor(u?p-e.pointerX:0),T=Math.floor(d?m-e.pointerY:0),E=x+(c?-w:w),D=S+(l?-T:T),O=-a[0]*x,k=-a[1]*S,A=Ms(E,h,g),j=Ms(D,_,v);if(o){let e=0,t=0;c&&w<0?e=As(y+w+O,o[0][0]):!c&&w>0&&(e=js(y+E+O,o[1][0])),l&&T<0?t=As(b+T+k,o[0][1]):!l&&T>0&&(t=js(b+D+k,o[1][1])),A=Math.max(A,e),j=Math.max(j,t)}if(s){let e=0,t=0;c&&w>0?e=js(y+w,s[0][0]):!c&&w<0&&(e=As(y+E,s[1][0])),l&&T>0?t=js(b+T,s[0][1]):!l&&T<0&&(t=As(b+D,s[1][1])),A=Math.max(A,e),j=Math.max(j,t)}if(i){if(u){let e=Ms(E/C,_,v)*C;if(A=Math.max(A,e),o){let e=0;e=!c&&!l||c&&!l&&f?js(b+k+E/C,o[1][1])*C:As(b+k+(c?w:-w)/C,o[0][1])*C,A=Math.max(A,e)}if(s){let e=0;e=!c&&!l||c&&!l&&f?As(b+E/C,s[1][1])*C:js(b+(c?w:-w)/C,s[0][1])*C,A=Math.max(A,e)}}if(d){let e=Ms(D*C,h,g)/C;if(j=Math.max(j,e),o){let e=0;e=!c&&!l||l&&!c&&f?js(y+D*C+O,o[1][0])/C:As(y+(l?T:-T)*C+O,o[0][0])/C,j=Math.max(j,e)}if(s){let e=0;e=!c&&!l||l&&!c&&f?As(y+D*C,s[1][0])/C:js(y+(l?T:-T)*C,s[0][0])/C,j=Math.max(j,e)}}}T+=T<0?j:-j,w+=w<0?A:-A,i&&(f?E>D*C?T=(Ns(c,l)?-w:w)/C:w=(Ns(c,l)?-T:T)*C:u?(T=w/C,l=c):(w=T*C,c=l));let M=c?y+w:y,N=l?b+T:b;return{width:x+(c?-w:w),height:S+(l?-T:T),x:a[0]*w*(c?-1:1)+M,y:a[1]*T*(l?-1:1)+N}}var Fs={width:0,height:0,x:0,y:0},Is={...Fs,pointerX:0,pointerY:0,aspectRatio:1};function Ls(e){return[[0,0],[e.measured.width,e.measured.height]]}function Rs(e,t,n){let r=t.position.x+e.position.x,i=t.position.y+e.position.y,a=e.measured.width??0,o=e.measured.height??0,s=n[0]*a,c=n[1]*o;return[[r-s,i-c],[r+a-s,i+o-c]]}function zs({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){let a=K(e),o={controlDirection:ks(`bottom-right`),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function s({controlPosition:e,boundaries:s,keepAspectRatio:c,resizeDirection:l,onResizeStart:u,onResize:d,onResizeEnd:f,shouldResize:p}){let m={...Fs},h={...Is};o={boundaries:s,resizeDirection:l,keepAspectRatio:c,controlDirection:ks(e)};let g,_=null,v=[],y,b,x,S=!1,C=It().on(`start`,e=>{let{nodeLookup:r,transform:i,snapGrid:a,snapToGrid:o,nodeOrigin:s,paneDomNode:c}=n();if(g=r.get(t),!g)return;_=c?.getBoundingClientRect()??null;let{xSnapped:l,ySnapped:d}=$a(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:o,containerBounds:_});m={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},h={...m,pointerX:l,pointerY:d,aspectRatio:m.width/m.height},y=void 0,g.parentId&&(g.extent===`parent`||g.expandParent)&&(y=r.get(g.parentId),b=y&&g.extent===`parent`?Ls(y):void 0),v=[],x=void 0;for(let[e,n]of r)if(n.parentId===t&&(v.push({id:e,position:{...n.position},extent:n.extent}),n.extent===`parent`||n.expandParent)){let e=Rs(n,g,n.origin??s);x=x?[[Math.min(e[0][0],x[0][0]),Math.min(e[0][1],x[0][1])],[Math.max(e[1][0],x[1][0]),Math.max(e[1][1],x[1][1])]]:e}u?.(e,{...m})}).on(`drag`,e=>{let{transform:t,snapGrid:i,snapToGrid:a,nodeOrigin:s}=n(),c=$a(e.sourceEvent,{transform:t,snapGrid:i,snapToGrid:a,containerBounds:_}),l=[];if(!g)return;let{x:u,y:f,width:C,height:w}=m,T={},E=g.origin??s,{width:D,height:O,x:k,y:A}=Ps(h,o.controlDirection,c,o.boundaries,o.keepAspectRatio,E,b,x),j=D!==C,M=O!==w,N=k!==u&&j,P=A!==f&&M;if(!N&&!P&&!j&&!M)return;if((N||P||E[0]===1||E[1]===1)&&(T.x=N?k:m.x,T.y=P?A:m.y,m.x=T.x,m.y=T.y,v.length>0)){let e=k-u,t=A-f;for(let n of v)n.position={x:n.position.x-e+E[0]*(D-C),y:n.position.y-t+E[1]*(O-w)},l.push(n)}if((j||M)&&(T.width=j&&(!o.resizeDirection||o.resizeDirection===`horizontal`)?D:m.width,T.height=M&&(!o.resizeDirection||o.resizeDirection===`vertical`)?O:m.height,m.width=T.width,m.height=T.height),y&&g.expandParent){let e=E[0]*(T.width??0);T.x&&T.x<e&&(m.x=e,h.x-=T.x-e);let t=E[1]*(T.height??0);T.y&&T.y<t&&(m.y=t,h.y-=T.y-t)}let F=Os({width:m.width,prevWidth:C,height:m.height,prevHeight:w,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),I={...m,direction:F};p?.(e,I)!==!1&&(S=!0,d?.(e,I),r(T,l))}).on(`end`,e=>{S&&=(f?.(e,{...m}),i?.({...m}),!1)});a.call(C)}function c(){a.on(`.drag`,null)}return{update:s,destroy:c}}var Bs=e((e=>{var n=t();function r(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var i=typeof Object.is==`function`?Object.is:r,a=n.useState,o=n.useEffect,s=n.useLayoutEffect,c=n.useDebugValue;function l(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s(function(){i.value=n,i.getSnapshot=t,u(i)&&l({inst:i})},[e,n,t]),o(function(){return u(i)&&l({inst:i}),e(function(){u(i)&&l({inst:i})})},[e]),c(n),n}function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch{return!0}}function d(e,t){return t()}var f=typeof window>`u`||window.document===void 0||window.document.createElement===void 0?d:l;e.useSyncExternalStore=n.useSyncExternalStore===void 0?f:n.useSyncExternalStore})),Vs=e(((e,t)=>{t.exports=Bs()})),Hs=e((e=>{var n=t(),r=Vs();function i(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var a=typeof Object.is==`function`?Object.is:i,o=r.useSyncExternalStore,s=n.useRef,c=n.useEffect,l=n.useMemo,u=n.useDebugValue;e.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(d.current===null){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=l(function(){function e(e){if(!o){if(o=!0,s=e,e=r(e),i!==void 0&&f.hasValue){var t=f.value;if(i(t,e))return c=t}return c=e}if(t=c,a(s,e))return t;var n=r(e);return i!==void 0&&i(t,n)?(s=e,t):(s=e,c=n)}var o=!1,s,c,l=n===void 0?null:n;return[function(){return e(t())},l===null?void 0:function(){return e(l())}]},[t,n,r,i]);var p=o(e,d[0],d[1]);return c(function(){f.hasValue=!0,f.value=p},[p]),u(p),p}})),Us=r(e(((e,t)=>{t.exports=Hs()}))(),1),Ws=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},o=t=e(r,i,a);return a},Gs=e=>e?Ws(e):Ws,{useDebugValue:Ks}=s.default,{useSyncExternalStoreWithSelector:qs}=Us.default,Js=e=>e;function Ys(e,t=Js,n){let r=qs(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ks(r),r}var Xs=(e,t)=>{let n=Gs(e),r=(e,r=t)=>Ys(n,e,r);return Object.assign(r,n),r},Zs=(e,t)=>e?Xs(e,t):Xs;function Z(e,t){if(Object.is(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}i();var Qs=(0,s.createContext)(null),$s=Qs.Provider,ec=Y.error001();function Q(e,t){let n=(0,s.useContext)(Qs);if(n===null)throw Error(ec);return Ys(n,e,t)}function $(){let e=(0,s.useContext)(Qs);if(e===null)throw Error(ec);return(0,s.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}var tc={display:`none`},nc={position:`absolute`,width:1,height:1,margin:-1,border:0,padding:0,overflow:`hidden`,clip:`rect(0px, 0px, 0px, 0px)`,clipPath:`inset(100%)`},rc=`react-flow__node-desc`,ic=`react-flow__edge-desc`,ac=`react-flow__aria-live`,oc=e=>e.ariaLiveMessage,sc=e=>e.ariaLabelConfig;function cc({rfId:e}){let t=Q(oc);return(0,o.jsx)(`div`,{id:`${ac}-${e}`,"aria-live":`assertive`,"aria-atomic":`true`,style:nc,children:t})}function lc({rfId:e,disableKeyboardA11y:t}){let n=Q(sc);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(`div`,{id:`${rc}-${e}`,style:tc,children:t?n[`node.a11yDescription.default`]:n[`node.a11yDescription.keyboardDisabled`]}),(0,o.jsx)(`div`,{id:`${ic}-${e}`,style:tc,children:n[`edge.a11yDescription.default`]}),!t&&(0,o.jsx)(cc,{rfId:e})]})}var uc=(0,s.forwardRef)(({position:e=`top-left`,children:t,className:n,style:r,...i},a)=>(0,o.jsx)(`div`,{className:c([`react-flow__panel`,n,...`${e}`.split(`-`)]),style:r,ref:a,...i,children:t}));uc.displayName=`Panel`;function dc({proOptions:e,position:t=`bottom-right`}){return e?.hideAttribution?null:(0,o.jsx)(uc,{position:t,className:`react-flow__attribution`,"data-message":`Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev`,children:(0,o.jsx)(`a`,{href:`https://reactflow.dev`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":`React Flow attribution`,children:`React Flow`})})}var fc=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},pc=e=>e.id;function mc(e,t){return Z(e.selectedNodes.map(pc),t.selectedNodes.map(pc))&&Z(e.selectedEdges.map(pc),t.selectedEdges.map(pc))}function hc({onSelectionChange:e}){let t=$(),{selectedNodes:n,selectedEdges:r}=Q(fc,mc);return(0,s.useEffect)(()=>{let i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(e=>e(i))},[n,r,e]),null}var gc=e=>!!e.onSelectionChangeHandlers;function _c({onSelectionChange:e}){let t=Q(gc);return e||t?(0,o.jsx)(hc,{onSelectionChange:e}):null}var vc=[0,0],yc={x:0,y:0,zoom:1},bc=[...`nodes.edges.defaultNodes.defaultEdges.onConnect.onConnectStart.onConnectEnd.onClickConnectStart.onClickConnectEnd.nodesDraggable.autoPanOnNodeFocus.nodesConnectable.nodesFocusable.edgesFocusable.edgesReconnectable.elevateNodesOnSelect.elevateEdgesOnSelect.minZoom.maxZoom.nodeExtent.onNodesChange.onEdgesChange.elementsSelectable.connectionMode.snapGrid.snapToGrid.translateExtent.connectOnClick.defaultEdgeOptions.fitView.fitViewOptions.onNodesDelete.onEdgesDelete.onDelete.onNodeDrag.onNodeDragStart.onNodeDragStop.onSelectionDrag.onSelectionDragStart.onSelectionDragStop.onMoveStart.onMove.onMoveEnd.noPanClassName.nodeOrigin.autoPanOnConnect.autoPanOnNodeDrag.onError.connectionRadius.isValidConnection.selectNodesOnDrag.nodeDragThreshold.connectionDragThreshold.onBeforeDelete.debug.autoPanSpeed.ariaLabelConfig.zIndexMode`.split(`.`),`rfId`],xc=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Sc={translateExtent:ea,nodeOrigin:vc,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:`nopan`,rfId:`1`};function Cc(e){let{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:o,reset:c,setDefaultNodesAndEdges:l}=Q(xc,Z),u=$();(0,s.useEffect)(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=Sc,c()}),[]);let d=(0,s.useRef)(Sc);return(0,s.useEffect)(()=>{for(let s of bc){let c=e[s];c!==d.current[s]&&e[s]!==void 0&&(s===`nodes`?t(c):s===`edges`?n(c):s===`minZoom`?r(c):s===`maxZoom`?i(c):s===`translateExtent`?a(c):s===`nodeExtent`?o(c):s===`ariaLabelConfig`?u.setState({ariaLabelConfig:Qa(c)}):s===`fitView`?u.setState({fitViewQueued:c}):s===`fitViewOptions`?u.setState({fitViewOptions:c}):u.setState({[s]:c}))}d.current=e},bc.map(t=>e[t])),null}function wc(){return typeof window>`u`||!window.matchMedia?null:window.matchMedia(`(prefers-color-scheme: dark)`)}function Tc(e){let[t,n]=(0,s.useState)(e===`system`?null:e);return(0,s.useEffect)(()=>{if(e!==`system`){n(e);return}let t=wc(),r=()=>n(t?.matches?`dark`:`light`);return r(),t?.addEventListener(`change`,r),()=>{t?.removeEventListener(`change`,r)}},[e]),t===null?wc()?.matches?`dark`:`light`:t}var Ec=typeof document<`u`?document:null;function Dc(e=null,t={target:Ec,actInsideInputWithModifier:!0}){let[n,r]=(0,s.useState)(!1),i=(0,s.useRef)(!1),a=(0,s.useRef)(new Set([])),[o,c]=(0,s.useMemo)(()=>{if(e!==null){let t=(Array.isArray(e)?e:[e]).filter(e=>typeof e==`string`).map(e=>e.replace(`+`,`
`).replace(`

`,`
+`).split(`
`));return[t,t.reduce((e,t)=>e.concat(...t),[])]}return[[],[]]},[e]);return(0,s.useEffect)(()=>{let n=t?.target??Ec,s=t?.actInsideInputWithModifier??!0;if(e!==null){let e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!i.current||i.current&&!s)&&ro(e))return!1;let n=kc(e.code,c);if(a.current.add(e[n]),Oc(o,a.current,!1)){let n=e.composedPath?.()?.[0]||e.target,a=n?.nodeName===`BUTTON`||n?.nodeName===`A`;t.preventDefault!==!1&&(i.current||!a)&&e.preventDefault(),r(!0)}},l=e=>{let t=kc(e.code,c);Oc(o,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[t]),e.key===`Meta`&&a.current.clear(),i.current=!1},u=()=>{a.current.clear(),r(!1)};return n?.addEventListener(`keydown`,e),n?.addEventListener(`keyup`,l),window.addEventListener(`blur`,u),window.addEventListener(`contextmenu`,u),()=>{n?.removeEventListener(`keydown`,e),n?.removeEventListener(`keyup`,l),window.removeEventListener(`blur`,u),window.removeEventListener(`contextmenu`,u)}}},[e,r]),n}function Oc(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function kc(e,t){return t.includes(e)?`code`:`key`}var Ac=()=>{let e=$();return(0,s.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[r,i,a],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{let{width:r,height:i,minZoom:a,maxZoom:o,panZoom:s}=e.getState(),c=Wa(t,r,i,a,o,n?.padding??.1);return s?(await s.setViewport(c,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:r,snapGrid:i,snapToGrid:a,domNode:o}=e.getState();if(!o)return t;let{x:s,y:c}=o.getBoundingClientRect(),l={x:t.x-s,y:t.y-c},u=n.snapGrid??i;return za(l,r,n.snapToGrid??a,u)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:i,y:a}=r.getBoundingClientRect(),o=Ba(t,n);return{x:o.x+i,y:o.y+a}}}),[])};function jc(e,t){let n=[],r=new Map,i=[];for(let t of e)if(t.type===`add`){i.push(t);continue}else if(t.type===`remove`||t.type===`replace`)r.set(t.id,[t]);else{let e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}for(let e of t){let t=r.get(e.id);if(!t){n.push(e);continue}if(t[0].type===`remove`)continue;if(t[0].type===`replace`){n.push({...t[0].item});continue}let i={...e};for(let e of t)Mc(e,i);n.push(i)}return i.length&&i.forEach(e=>{e.index===void 0?n.push({...e.item}):n.splice(e.index,0,{...e.item})}),n}function Mc(e,t){switch(e.type){case`select`:t.selected=e.selected;break;case`position`:e.position!==void 0&&(t.position=e.position),e.dragging!==void 0&&(t.dragging=e.dragging);break;case`dimensions`:e.dimensions!==void 0&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes===`width`)&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes===`height`)&&(t.height=e.dimensions.height))),typeof e.resizing==`boolean`&&(t.resizing=e.resizing);break}}function Nc(e,t){return jc(e,t)}function Pc(e,t){return jc(e,t)}function Fc(e,t){return{id:e,type:`select`,selected:t}}function Ic(e,t=new Set,n=!1){let r=[];for(let[i,a]of e){let e=t.has(i);!(a.selected===void 0&&!e)&&a.selected!==e&&(n&&(a.selected=e),r.push(Fc(a.id,e)))}return r}function Lc({items:e=[],lookup:t}){let n=[],r=new Map(e.map(e=>[e.id,e]));for(let[r,i]of e.entries()){let e=t.get(i.id),a=e?.internals?.userNode??e;a!==void 0&&a!==i&&n.push({id:i.id,item:i,type:`replace`}),a===void 0&&n.push({item:i,type:`add`,index:r})}for(let[e]of t)r.get(e)===void 0&&n.push({id:e,type:`remove`});return n}function Rc(e){return{id:e.id,type:`remove`}}var zc=e=>fa(e),Bc=e=>da(e);function Vc(e){return(0,s.forwardRef)(e)}var Hc=typeof window<`u`?s.useLayoutEffect:s.useEffect;function Uc(e){let[t,n]=(0,s.useState)(BigInt(0)),[r]=(0,s.useState)(()=>Wc(()=>n(e=>e+BigInt(1))));return Hc(()=>{let t=r.get();t.length&&(e(t),r.reset())},[t]),r}function Wc(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}var Gc=(0,s.createContext)(null);function Kc({children:e}){let t=$(),n=Uc((0,s.useCallback)(e=>{let{nodes:n=[],setNodes:r,hasDefaultNodes:i,onNodesChange:a,nodeLookup:o,fitViewQueued:s,onNodesChangeMiddlewareMap:c}=t.getState(),l=n;for(let t of e)l=typeof t==`function`?t(l):t;let u=Lc({items:l,lookup:o});for(let e of c.values())u=e(u);i&&r(l),u.length>0?a?.(u):s&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[])),r=Uc((0,s.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:a,edgeLookup:o}=t.getState(),s=n;for(let t of e)s=typeof t==`function`?t(s):t;i?r(s):a&&a(Lc({items:s,lookup:o}))},[])),i=(0,s.useMemo)(()=>({nodeQueue:n,edgeQueue:r}),[]);return(0,o.jsx)(Gc.Provider,{value:i,children:e})}function qc(){let e=(0,s.useContext)(Gc);if(!e)throw Error(`useBatchContext must be used within a BatchProvider`);return e}var Jc=e=>!!e.panZoom;function Yc(){let e=Ac(),t=$(),n=qc(),r=Q(Jc),i=(0,s.useMemo)(()=>{let e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},i=e=>{n.edgeQueue.push(e)},a=e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState(),i=zc(e)?e:n.get(e.id),a=i.parentId?Ya(i.position,i.measured,i.parentId,n,r):i.position;return ja({...i,position:a,width:i.measured?.width??i.width,height:i.measured?.height??i.height})},o=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){let e=typeof t==`function`?t(r):t;return n.replace&&zc(e)?e:{...r,...e}}return r}))},s=(e,t,n={replace:!1})=>{i(r=>r.map(r=>{if(r.id===e){let e=typeof t==`function`?t(r):t;return n.replace&&Bc(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:i,addNodes:e=>{let t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:n=[],transform:r}=t.getState(),[i,a,o]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:i,y:a,zoom:o}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{let{nodes:r,edges:i,onNodesDelete:a,onEdgesDelete:o,triggerNodeChanges:s,triggerEdgeChanges:c,onDelete:l,onBeforeDelete:u}=t.getState(),{nodes:d,edges:f}=await Sa({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:i,onBeforeDelete:u}),p=f.length>0,m=d.length>0;if(p){let e=f.map(Rc);o?.(f),c(e)}if(m){let e=d.map(Rc);a?.(d),s(e)}return(m||p)&&l?.({nodes:d,edges:f}),{deletedNodes:d,deletedEdges:f}},getIntersectingNodes:(e,n=!0,r)=>{let i=Fa(e),o=i?e:a(e),s=r!==void 0;return o?(r||t.getState().nodes).filter(r=>{let a=t.getState().nodeLookup.get(r.id);if(a&&!i&&(r.id===e.id||!a.internals.positionAbsolute))return!1;let c=ja(s?r:a),l=Pa(c,o);return n&&l>0||l>=c.width*c.height||l>=o.width*o.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{let r=Fa(e)?e:a(e);if(!r)return!1;let i=Pa(r,t);return n&&i>0||i>=t.width*t.height||i>=r.width*r.height},updateNode:o,updateNodeData:(e,t,n={replace:!1})=>{o(e,e=>{let r=typeof t==`function`?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,e=>{let r=typeof t==`function`?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState();return ha(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:``}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:``}`)?.values()??[]),fitView:async e=>{let r=t.getState().fitViewResolver??Za();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:r}),n.nodeQueue.push(e=>[...e]),r.promise}}},[]);return(0,s.useMemo)(()=>({...i,...e,viewportInitialized:r}),[r])}var Xc=e=>e.selected,Zc=typeof window<`u`?window:void 0;function Qc({deleteKeyCode:e,multiSelectionKeyCode:t}){let n=$(),{deleteElements:r}=Yc(),i=Dc(e,{actInsideInputWithModifier:!1}),a=Dc(t,{target:Zc});(0,s.useEffect)(()=>{if(i){let{edges:e,nodes:t}=n.getState();r({nodes:t.filter(Xc),edges:e.filter(Xc)}),n.setState({nodesSelectionActive:!1})}},[i]),(0,s.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])}function $c(e){let t=$();(0,s.useEffect)(()=>{let n=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;let n=eo(e.current);(n.height===0||n.width===0)&&t.getState().onError?.(`004`,Y.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener(`resize`,n);let t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener(`resize`,n),t&&e.current&&t.unobserve(e.current)}}},[])}var el={position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},tl=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function nl({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=ia.Free,zoomOnDoubleClick:c=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:f,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:h=!0,children:g,noWheelClassName:_,noPanClassName:v,onViewportChange:y,isControlledViewport:b,paneClickDistance:x,selectionOnDrag:S}){let C=$(),w=(0,s.useRef)(null),{userSelectionActive:T,lib:E,connectionInProgress:D}=Q(tl,Z),O=Dc(m),k=(0,s.useRef)();$c(w);let A=(0,s.useCallback)(e=>{y?.({x:e[0],y:e[1],zoom:e[2]}),b||C.setState({transform:e})},[y,b]);return(0,s.useEffect)(()=>{if(w.current){k.current=Es({domNode:w.current,minZoom:f,maxZoom:p,translateExtent:d,viewport:u,onDraggingChange:e=>C.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:r}=C.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:r}=C.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:r}=C.getState();r?.(e,t),n?.(t)}});let{x:e,y:t,zoom:n}=k.current.getViewport();return C.setState({panZoom:k.current,transform:[e,t,n],domNode:w.current.closest(`.react-flow`)}),()=>{k.current?.destroy()}}},[]),(0,s.useEffect)(()=>{k.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:a,zoomOnDoubleClick:c,panOnDrag:l,zoomActivationKeyPressed:O,preventScrolling:h,noPanClassName:v,userSelectionActive:T,noWheelClassName:_,lib:E,onTransformChange:A,connectionInProgress:D,selectionOnDrag:S,paneClickDistance:x})},[e,t,n,r,i,a,c,l,O,h,v,T,_,E,A,D,S,x]),(0,o.jsx)(`div`,{className:`react-flow__renderer`,ref:w,style:el,children:g})}var rl=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function il(){let{userSelectionActive:e,userSelectionRect:t}=Q(rl,Z);return e&&t?(0,o.jsx)(`div`,{className:`react-flow__selection react-flow__container`,style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}var al=(e,t)=>n=>{n.target===t.current&&e?.(n)},ol=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function sl({isSelecting:e,selectionKeyPressed:t,selectionMode:n=aa.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:f,onPaneScroll:p,onPaneMouseEnter:m,onPaneMouseMove:h,onPaneMouseLeave:g,children:_}){let v=$(),{userSelectionActive:y,elementsSelectable:b,dragging:x,connectionInProgress:S}=Q(ol,Z),C=b&&(e||y),w=(0,s.useRef)(null),T=(0,s.useRef)(),E=(0,s.useRef)(new Set),D=(0,s.useRef)(new Set),O=(0,s.useRef)(!1),k=e=>{if(O.current||S){O.current=!1;return}d?.(e),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},A=e=>{if(Array.isArray(r)&&r?.includes(2)){e.preventDefault();return}f?.(e)},j=p?e=>p(e):void 0;return(0,o.jsxs)(`div`,{className:c([`react-flow__pane`,{draggable:r===!0||Array.isArray(r)&&r.includes(0),dragging:x,selection:e}]),onClick:C?void 0:al(k,w),onContextMenu:al(A,w),onWheel:al(j,w),onPointerEnter:C?void 0:m,onPointerMove:C?e=>{let{userSelectionRect:r,transform:a,nodeLookup:o,edgeLookup:s,connectionLookup:c,triggerNodeChanges:u,triggerEdgeChanges:d,defaultEdgeOptions:f,resetSelectedElements:p}=v.getState();if(!T.current||!r)return;let{x:m,y:h}=ao(e.nativeEvent,T.current),{startX:g,startY:_}=r;if(!O.current){let n=t?0:i;if(Math.hypot(m-g,h-_)<=n)return;p(),l?.(e)}O.current=!0;let y={startX:g,startY:_,x:m<g?m:g,y:h<_?h:_,width:Math.abs(m-g),height:Math.abs(h-_)},b=E.current,x=D.current;E.current=new Set(_a(o,y,a,n===aa.Partial,!0).map(e=>e.id)),D.current=new Set;let S=f?.selectable??!0;for(let e of E.current){let t=c.get(e);if(t)for(let{edgeId:e}of t.values()){let t=s.get(e);t&&(t.selectable??S)&&D.current.add(e)}}Xa(b,E.current)||u(Ic(o,E.current,!0)),Xa(x,D.current)||d(Ic(s,D.current)),v.setState({userSelectionRect:y,userSelectionActive:!0,nodesSelectionActive:!1})}:h,onPointerUp:C?e=>{e.button===0&&(e.target?.releasePointerCapture?.(e.pointerId),!y&&e.target===w.current&&v.getState().userSelectionRect&&k?.(e),v.setState({userSelectionActive:!1,userSelectionRect:null}),O.current&&(u?.(e),v.setState({nodesSelectionActive:E.current.size>0})))}:void 0,onPointerDownCapture:C?n=>{let{domNode:r}=v.getState();if(T.current=r?.getBoundingClientRect(),!T.current)return;let i=n.target===w.current;if(!i&&n.target.closest(`.nokey`)||!e||!(a&&i||t)||n.button!==0||!n.isPrimary)return;n.target?.setPointerCapture?.(n.pointerId),O.current=!1;let{x:o,y:s}=ao(n.nativeEvent,T.current);v.setState({userSelectionRect:{width:0,height:0,startX:o,startY:s,x:o,y:s}}),i||(n.stopPropagation(),n.preventDefault())}:void 0,onClickCapture:C?e=>{O.current&&=(e.stopPropagation(),!1)}:void 0,onPointerLeave:g,ref:w,style:el,children:[_,(0,o.jsx)(il,{})]})}function cl({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:o,nodeLookup:s,onError:c}=t.getState(),l=s.get(e);if(!l){c?.(`012`,Y.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function ll({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,nodeClickDistance:o}){let c=$(),[l,u]=(0,s.useState)(!1),d=(0,s.useRef)();return(0,s.useEffect)(()=>{d.current=ts({getStoreItems:()=>c.getState(),onNodeMouseDown:t=>{cl({id:t,store:c,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),(0,s.useEffect)(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:o}),()=>{d.current?.destroy()}},[n,r,t,a,e,i]),l}var ul=e=>t=>t.selected&&(t.draggable||e&&t.draggable===void 0);function dl(){let e=$();return(0,s.useCallback)(t=>{let{nodeExtent:n,snapToGrid:r,snapGrid:i,nodesDraggable:a,onError:o,updateNodePositions:s,nodeLookup:c,nodeOrigin:l}=e.getState(),u=new Map,d=ul(a),f=r?i[0]:5,p=r?i[1]:5,m=t.direction.x*f*t.factor,h=t.direction.y*p*t.factor;for(let[,e]of c){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+m,y:e.internals.positionAbsolute.y+h};r&&(t=Ra(t,i));let{position:a,positionAbsolute:s}=xa({nodeId:e.id,nextPosition:t,nodeLookup:c,nodeExtent:n,nodeOrigin:l,onError:o});e.position=a,e.internals.positionAbsolute=s,u.set(e.id,e)}s(u)},[])}var fl=(0,s.createContext)(null),pl=fl.Provider;fl.Consumer;var ml=()=>(0,s.useContext)(fl),hl=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),gl=(e,t,n)=>r=>{let{connectionClickStartHandle:i,connectionMode:a,connection:o}=r,{fromHandle:s,toHandle:c,isValid:l}=o,u=c?.nodeId===e&&c?.id===t&&c?.type===n;return{connectingFrom:s?.nodeId===e&&s?.id===t&&s?.type===n,connectingTo:u,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:a===ra.Strict?s?.type!==n:e!==s?.nodeId||t!==s?.id,connectionInProcess:!!s,clickConnectionInProcess:!!i,valid:u&&l}};function _l({type:e=`source`,position:t=X.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:l,children:u,className:d,onMouseDown:f,onTouchStart:p,...m},h){let g=s||null,_=e===`target`,v=$(),y=ml(),{connectOnClick:b,noPanClassName:x,rfId:S}=Q(hl,Z),{connectingFrom:C,connectingTo:w,clickConnecting:T,isPossibleEndHandle:E,connectionInProcess:D,clickConnectionInProcess:O,valid:k}=Q(gl(y,g,e),Z);y||v.getState().onError?.(`010`,Y.error010());let A=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=v.getState(),i={...t,...e};if(r){let{edges:e,setEdges:t}=v.getState();t(_o(i,e))}n?.(i),l?.(i)},j=e=>{if(!y)return;let t=io(e.nativeEvent);if(i&&(t&&e.button===0||!t)){let t=v.getState();ds.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:_,handleId:g,nodeId:y,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:A,isValidConnection:n||t.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?f?.(e):p?.(e)},M=t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:o,connectionMode:s,isValidConnection:c,lib:l,rfId:u,nodeLookup:d,connection:f}=v.getState();if(!y||!o&&!i)return;if(!o){r?.(t.nativeEvent,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,id:g}});return}let p=to(t.target),m=n||c,{connection:h,isValid:_}=ds.isValid(t.nativeEvent,{handle:{nodeId:y,id:g,type:e},connectionMode:s,fromNodeId:o.nodeId,fromHandleId:o.id||null,fromType:o.type,isValidConnection:m,flowId:u,doc:p,lib:l,nodeLookup:d});_&&h&&A(h);let b=structuredClone(f);delete b.inProgress,b.toPosition=b.toHandle?b.toHandle.position:null,a?.(t,b),v.setState({connectionClickStartHandle:null})};return(0,o.jsx)(`div`,{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${S}-${y}-${g}-${e}`,className:c([`react-flow__handle`,`react-flow__handle-${t}`,`nodrag`,x,d,{source:!_,target:_,connectable:r,connectablestart:i,connectableend:a,clickconnecting:T,connectingfrom:C,connectingto:w,valid:k,connectionindicator:r&&(!D||E)&&(D||O?a:i)}]),onMouseDown:j,onTouchStart:j,onClick:b?M:void 0,ref:h,...m,children:u})}var vl=(0,s.memo)(Vc(_l));function yl({data:e,isConnectable:t,sourcePosition:n=X.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[e?.label,(0,o.jsx)(vl,{type:`source`,position:n,isConnectable:t})]})}function bl({data:e,isConnectable:t,targetPosition:n=X.Top,sourcePosition:r=X.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(vl,{type:`target`,position:n,isConnectable:t}),e?.label,(0,o.jsx)(vl,{type:`source`,position:r,isConnectable:t})]})}function xl(){return null}function Sl({data:e,isConnectable:t,targetPosition:n=X.Top}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(vl,{type:`target`,position:n,isConnectable:t}),e?.label]})}var Cl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},wl={input:yl,default:bl,output:Sl,group:xl};function Tl(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}var El=e=>{let{width:t,height:n,x:r,y:i}=ga(e.nodeLookup,{filter:e=>!!e.selected});return{width:Ia(t)?t:null,height:Ia(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Dl({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=$(),{width:i,height:a,transformString:l,userSelectionActive:u}=Q(El,Z),d=dl(),f=(0,s.useRef)(null);if((0,s.useEffect)(()=>{n||f.current?.focus({preventScroll:!0})},[n]),ll({nodeRef:f}),u||!i||!a)return null;let p=e?t=>{e(t,r.getState().nodes.filter(e=>e.selected))}:void 0;return(0,o.jsx)(`div`,{className:c([`react-flow__nodesselection`,`react-flow__container`,t]),style:{transform:l},children:(0,o.jsx)(`div`,{ref:f,className:`react-flow__nodesselection-rect`,onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(Cl,e.key)&&(e.preventDefault(),d({direction:Cl[e.key],factor:e.shiftKey?4:1}))},style:{width:i,height:a}})})}var Ol=typeof window<`u`?window:void 0,kl=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Al({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:c,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:d,selectionMode:f,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:h,panActivationKeyCode:g,zoomActivationKeyCode:_,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:x,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:w,panOnDrag:T,defaultViewport:E,translateExtent:D,minZoom:O,maxZoom:k,preventScrolling:A,onSelectionContextMenu:j,noWheelClassName:M,noPanClassName:N,disableKeyboardA11y:P,onViewportChange:F,isControlledViewport:I}){let{nodesSelectionActive:L,userSelectionActive:R}=Q(kl,Z),z=Dc(u,{target:Ol}),B=Dc(g,{target:Ol}),V=B||T,H=B||x,ee=d&&V!==!0,U=z||R||ee;return Qc({deleteKeyCode:l,multiSelectionKeyCode:h}),(0,o.jsx)(nl,{onPaneContextMenu:a,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:H,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:w,panOnDrag:!z&&V,defaultViewport:E,translateExtent:D,minZoom:O,maxZoom:k,zoomActivationKeyCode:_,preventScrolling:A,noWheelClassName:M,noPanClassName:N,onViewportChange:F,isControlledViewport:I,paneClickDistance:c,selectionOnDrag:ee,children:(0,o.jsxs)(sl,{onSelectionStart:p,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:V,isSelecting:!!U,selectionMode:f,selectionKeyPressed:z,paneClickDistance:c,selectionOnDrag:ee,children:[e,L&&(0,o.jsx)(Dl,{onSelectionContextMenu:j,noPanClassName:N,disableKeyboardA11y:P})]})})}Al.displayName=`FlowRenderer`;var jl=(0,s.memo)(Al),Ml=e=>t=>e?_a(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function Nl(e){return Q((0,s.useCallback)(Ml(e),[e]),Z)}var Pl=e=>e.updateNodeInternals;function Fl(){let e=Q(Pl),[t]=(0,s.useState)(()=>typeof ResizeObserver>`u`?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute(`data-id`);n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,s.useEffect)(()=>()=>{t?.disconnect()},[t]),t}function Il({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){let i=$(),a=(0,s.useRef)(null),o=(0,s.useRef)(null),c=(0,s.useRef)(e.sourcePosition),l=(0,s.useRef)(e.targetPosition),u=(0,s.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,s.useEffect)(()=>{a.current&&!e.hidden&&(!d||o.current!==a.current)&&(o.current&&r?.unobserve(o.current),r?.observe(a.current),o.current=a.current)},[d,e.hidden]),(0,s.useEffect)(()=>()=>{o.current&&=(r?.unobserve(o.current),null)},[]),(0,s.useEffect)(()=>{if(a.current){let n=u.current!==t,r=c.current!==e.sourcePosition,o=l.current!==e.targetPosition;(n||r||o)&&(u.current=t,c.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function Ll({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:a,onDoubleClick:s,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:f,resizeObserver:p,noDragClassName:m,noPanClassName:h,disableKeyboardA11y:g,rfId:_,nodeTypes:v,nodeClickDistance:y,onError:b}){let{node:x,internals:S,isParent:C}=Q(t=>{let n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},Z),w=x.type||`default`,T=v?.[w]||wl[w];T===void 0&&(b?.(`003`,Y.error003(w)),w=`default`,T=v?.default||wl.default);let E=!!(x.draggable||l&&x.draggable===void 0),D=!!(x.selectable||u&&x.selectable===void 0),O=!!(x.connectable||d&&x.connectable===void 0),k=!!(x.focusable||f&&x.focusable===void 0),A=$(),j=Ja(x),M=Il({node:x,nodeType:w,hasDimensions:j,resizeObserver:p}),N=ll({nodeRef:M,disabled:x.hidden||!E,noDragClassName:m,handleSelector:x.dragHandle,nodeId:e,isSelectable:D,nodeClickDistance:y}),P=dl();if(x.hidden)return null;let F=qa(x),I=Tl(x),L=D||E||t||n||r||i,R=n?e=>n(e,{...S.userNode}):void 0,z=r?e=>r(e,{...S.userNode}):void 0,B=i?e=>i(e,{...S.userNode}):void 0,V=a?e=>a(e,{...S.userNode}):void 0,H=s?e=>s(e,{...S.userNode}):void 0,ee=n=>{let{selectNodesOnDrag:r,nodeDragThreshold:i}=A.getState();D&&(!r||!E||i>0)&&cl({id:e,store:A,nodeRef:M}),t&&t(n,{...S.userNode})},U=t=>{if(!(ro(t.nativeEvent)||g)){if(ta.includes(t.key)&&D)cl({id:e,store:A,unselect:t.key===`Escape`,nodeRef:M});else if(E&&x.selected&&Object.prototype.hasOwnProperty.call(Cl,t.key)){t.preventDefault();let{ariaLabelConfig:e}=A.getState();A.setState({ariaLiveMessage:e[`node.a11yDescription.ariaLiveMessage`]({direction:t.key.replace(`Arrow`,``).toLowerCase(),x:~~S.positionAbsolute.x,y:~~S.positionAbsolute.y})}),P({direction:Cl[t.key],factor:t.shiftKey?4:1})}}},W=()=>{if(g||!M.current?.matches(`:focus-visible`))return;let{transform:t,width:n,height:r,autoPanOnNodeFocus:i,setCenter:a}=A.getState();i&&(_a(new Map([[e,x]]),{x:0,y:0,width:n,height:r},t,!0).length>0||a(x.position.x+F.width/2,x.position.y+F.height/2,{zoom:t[2]}))};return(0,o.jsx)(`div`,{className:c([`react-flow__node`,`react-flow__node-${w}`,{[h]:E},x.className,{selected:x.selected,selectable:D,parent:C,draggable:E,dragging:N}]),ref:M,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:L?`all`:`none`,visibility:j?`visible`:`hidden`,...x.style,...I},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:R,onMouseMove:z,onMouseLeave:B,onContextMenu:V,onClick:ee,onDoubleClick:H,onKeyDown:k?U:void 0,tabIndex:k?0:void 0,onFocus:k?W:void 0,role:x.ariaRole??(k?`group`:void 0),"aria-roledescription":`node`,"aria-describedby":g?void 0:`${rc}-${_}`,"aria-label":x.ariaLabel,...x.domAttributes,children:(0,o.jsx)(pl,{value:e,children:(0,o.jsx)(T,{id:e,data:x.data,type:w,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:x.selected??!1,selectable:D,draggable:E,deletable:x.deletable??!0,isConnectable:O,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:N,dragHandle:x.dragHandle,zIndex:S.z,parentId:x.parentId,...F})})})}var Rl=(0,s.memo)(Ll),zl=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Bl(e){let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:a}=Q(zl,Z),s=Nl(e.onlyRenderVisibleElements),c=Fl();return(0,o.jsx)(`div`,{className:`react-flow__nodes`,style:el,children:s.map(s=>(0,o.jsx)(Rl,{id:s,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},s))})}Bl.displayName=`NodeRenderer`;var Vl=(0,s.memo)(Bl);function Hl(e){return Q((0,s.useCallback)(t=>{if(!e)return t.edges.map(e=>e.id);let n=[];if(t.width&&t.height)for(let e of t.edges){let r=t.nodeLookup.get(e.source),i=t.nodeLookup.get(e.target);r&&i&&mo({sourceNode:r,targetNode:i,width:t.width,height:t.height,transform:t.transform})&&n.push(e.id)}return n},[e]),Z)}var Ul=({color:e=`none`,strokeWidth:t=1})=>(0,o.jsx)(`polyline`,{className:`arrow`,style:{strokeWidth:t,...e&&{stroke:e}},strokeLinecap:`round`,fill:`none`,strokeLinejoin:`round`,points:`-5,-4 0,0 -5,4`}),Wl=({color:e=`none`,strokeWidth:t=1})=>(0,o.jsx)(`polyline`,{className:`arrowclosed`,style:{strokeWidth:t,...e&&{stroke:e,fill:e}},strokeLinecap:`round`,strokeLinejoin:`round`,points:`-5,-4 0,0 -5,4 -5,-4`}),Gl={[ca.Arrow]:Ul,[ca.ArrowClosed]:Wl};function Kl(e){let t=$();return(0,s.useMemo)(()=>Object.prototype.hasOwnProperty.call(Gl,e)?Gl[e]:(t.getState().onError?.(`009`,Y.error009(e)),null),[e])}var ql=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a=`strokeWidth`,strokeWidth:s,orient:c=`auto-start-reverse`})=>{let l=Kl(t);return l?(0,o.jsx)(`marker`,{className:`react-flow__arrowhead`,id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:`-10 -10 20 20`,markerUnits:a,orient:c,refX:`0`,refY:`0`,children:(0,o.jsx)(l,{color:n,strokeWidth:s})}):null},Jl=({defaultColor:e,rfId:t})=>{let n=Q(e=>e.edges),r=Q(e=>e.defaultEdgeOptions),i=(0,s.useMemo)(()=>jo(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?(0,o.jsx)(`svg`,{className:`react-flow__marker`,"aria-hidden":`true`,children:(0,o.jsx)(`defs`,{children:i.map(e=>(0,o.jsx)(ql,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};Jl.displayName=`MarkerDefinitions`;var Yl=(0,s.memo)(Jl);function Xl({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:a,labelBgPadding:l=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...p}){let[m,h]=(0,s.useState)({x:1,y:0,width:0,height:0}),g=c([`react-flow__edge-textwrapper`,f]),_=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(_.current){let e=_.current.getBBox();h({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n?(0,o.jsxs)(`g`,{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:g,visibility:m.width?`visible`:`hidden`,...p,children:[i&&(0,o.jsx)(`rect`,{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:`react-flow__edge-textbg`,style:a,rx:u,ry:u}),(0,o.jsx)(`text`,{className:`react-flow__edge-text`,y:m.height/2,dy:`0.3em`,ref:_,style:r,children:n}),d]}):null}Xl.displayName=`EdgeText`;var Zl=(0,s.memo)(Xl);function Ql({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...f}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(`path`,{...f,d:e,fill:`none`,className:c([`react-flow__edge-path`,f.className])}),d?(0,o.jsx)(`path`,{d:e,fill:`none`,strokeOpacity:0,strokeWidth:d,className:`react-flow__edge-interaction`}):null,r&&Ia(t)&&Ia(n)?(0,o.jsx)(Zl,{x:t,y:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function $l({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===X.Left||e===X.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function eu({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:r,targetY:i,targetPosition:a=X.Top}){let[o,s]=$l({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=$l({pos:a,x1:r,y1:i,x2:e,y2:t}),[u,d,f,p]=so({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${o},${s} ${c},${l} ${r},${i}`,u,d,f,p]}function tu(e){return(0,s.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:g,markerStart:_,interactionWidth:v})=>{let[y,b,x]=eu({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:c});return(0,o.jsx)(Ql,{id:e.isInternal?void 0:t,path:y,labelX:b,labelY:x,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:g,markerStart:_,interactionWidth:v})})}var nu=tu({isInternal:!1}),ru=tu({isInternal:!0});nu.displayName=`SimpleBezierEdge`,ru.displayName=`SimpleBezierEdgeInternal`;function iu(e){return(0,s.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:m=X.Bottom,targetPosition:h=X.Top,markerEnd:g,markerStart:_,pathOptions:v,interactionWidth:y})=>{let[b,x,S]=wo({sourceX:n,sourceY:r,sourcePosition:m,targetX:i,targetY:a,targetPosition:h,borderRadius:v?.borderRadius,offset:v?.offset,stepPosition:v?.stepPosition});return(0,o.jsx)(Ql,{id:e.isInternal?void 0:t,path:b,labelX:x,labelY:S,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:_,interactionWidth:y})})}var au=iu({isInternal:!1}),ou=iu({isInternal:!0});au.displayName=`SmoothStepEdge`,ou.displayName=`SmoothStepEdgeInternal`;function su(e){return(0,s.memo)(({id:t,...n})=>{let r=e.isInternal?void 0:t;return(0,o.jsx)(au,{...n,id:r,pathOptions:(0,s.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}var cu=su({isInternal:!1}),lu=su({isInternal:!0});cu.displayName=`StepEdge`,lu.displayName=`StepEdgeInternal`;function uu(e){return(0,s.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:h,interactionWidth:g})=>{let[_,v,y]=vo({sourceX:n,sourceY:r,targetX:i,targetY:a});return(0,o.jsx)(Ql,{id:e.isInternal?void 0:t,path:_,labelX:v,labelY:y,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:h,interactionWidth:g})})}var du=uu({isInternal:!1}),fu=uu({isInternal:!0});du.displayName=`StraightEdge`,fu.displayName=`StraightEdgeInternal`;function pu(e){return(0,s.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=X.Bottom,targetPosition:c=X.Top,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:g,markerStart:_,pathOptions:v,interactionWidth:y})=>{let[b,x,S]=uo({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:c,curvature:v?.curvature});return(0,o.jsx)(Ql,{id:e.isInternal?void 0:t,path:b,labelX:x,labelY:S,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:g,markerStart:_,interactionWidth:y})})}var mu=pu({isInternal:!1}),hu=pu({isInternal:!0});mu.displayName=`BezierEdge`,hu.displayName=`BezierEdgeInternal`;var gu={default:hu,straight:fu,step:lu,smoothstep:ou,simplebezier:ru},_u={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},vu=(e,t,n)=>n===X.Left?e-t:n===X.Right?e+t:e,yu=(e,t,n)=>n===X.Top?e-t:n===X.Bottom?e+t:e,bu=`react-flow__edgeupdater`;function xu({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:l}){return(0,o.jsx)(`circle`,{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:c([bu,`${bu}-${l}`]),cx:vu(t,r,e),cy:yu(n,r,e),r,stroke:`transparent`,fill:`transparent`})}function Su({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:a,targetY:s,sourcePosition:c,targetPosition:l,onReconnect:u,onReconnectStart:d,onReconnectEnd:f,setReconnecting:p,setUpdateHover:m}){let h=$(),g=(e,t)=>{if(e.button!==0)return;let{autoPanOnConnect:r,domNode:i,isValidConnection:a,connectionMode:o,connectionRadius:s,lib:c,onConnectStart:l,onConnectEnd:m,cancelConnection:g,nodeLookup:_,rfId:v,panBy:y,updateConnection:b}=h.getState(),x=t.type===`target`;ds.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:o,connectionRadius:s,domNode:i,handleId:t.id,nodeId:t.nodeId,nodeLookup:_,isTarget:x,edgeUpdaterType:t.type,lib:c,flowId:v,cancelConnection:g,panBy:y,isValidConnection:a,onConnect:e=>u?.(n,e),onConnectStart:(r,i)=>{p(!0),d?.(e,n,t.type),l?.(r,i)},onConnectEnd:m,onReconnectEnd:(e,r)=>{p(!1),f?.(e,n,t.type,r)},updateConnection:b,getTransform:()=>h.getState().transform,getFromHandle:()=>h.getState().connection.fromHandle,dragThreshold:h.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},_=e=>g(e,{nodeId:n.target,id:n.targetHandle??null,type:`target`}),v=e=>g(e,{nodeId:n.source,id:n.sourceHandle??null,type:`source`}),y=()=>m(!0),b=()=>m(!1);return(0,o.jsxs)(o.Fragment,{children:[(e===!0||e===`source`)&&(0,o.jsx)(xu,{position:c,centerX:r,centerY:i,radius:t,onMouseDown:_,onMouseEnter:y,onMouseOut:b,type:`source`}),(e===!0||e===`target`)&&(0,o.jsx)(xu,{position:l,centerX:a,centerY:s,radius:t,onMouseDown:v,onMouseEnter:y,onMouseOut:b,type:`target`})]})}function Cu({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:a,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,reconnectRadius:p,onReconnect:m,onReconnectStart:h,onReconnectEnd:g,rfId:_,edgeTypes:v,noPanClassName:y,onError:b,disableKeyboardA11y:x}){let S=Q(t=>t.edgeLookup.get(e)),C=Q(e=>e.defaultEdgeOptions);S=C?{...C,...S}:S;let w=S.type||`default`,T=v?.[w]||gu[w];T===void 0&&(b?.(`011`,Y.error011(w)),w=`default`,T=v?.default||gu.default);let E=!!(S.focusable||t&&S.focusable===void 0),D=m!==void 0&&(S.reconnectable||n&&S.reconnectable===void 0),O=!!(S.selectable||r&&S.selectable===void 0),k=(0,s.useRef)(null),[A,j]=(0,s.useState)(!1),[M,N]=(0,s.useState)(!1),P=$(),{zIndex:F,sourceX:I,sourceY:L,targetX:R,targetY:z,sourcePosition:B,targetPosition:V}=Q((0,s.useCallback)(t=>{let n=t.nodeLookup.get(S.source),r=t.nodeLookup.get(S.target);if(!n||!r)return{zIndex:S.zIndex,..._u};let i=Eo({id:e,sourceNode:n,targetNode:r,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:t.connectionMode,onError:b});return{zIndex:po({selected:S.selected,zIndex:S.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect,zIndexMode:t.zIndexMode}),...i||_u}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),Z),H=(0,s.useMemo)(()=>S.markerStart?`url('#${Ao(S.markerStart,_)}')`:void 0,[S.markerStart,_]),ee=(0,s.useMemo)(()=>S.markerEnd?`url('#${Ao(S.markerEnd,_)}')`:void 0,[S.markerEnd,_]);if(S.hidden||I===null||L===null||R===null||z===null)return null;let U=t=>{let{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:a}=P.getState();O&&(P.setState({nodesSelectionActive:!1}),S.selected&&a?(r({nodes:[],edges:[S]}),k.current?.blur()):n([e])),i&&i(t,S)},W=a?e=>{a(e,{...S})}:void 0,te=l?e=>{l(e,{...S})}:void 0,ne=u?e=>{u(e,{...S})}:void 0,re=d?e=>{d(e,{...S})}:void 0,ie=f?e=>{f(e,{...S})}:void 0;return(0,o.jsx)(`svg`,{style:{zIndex:F},children:(0,o.jsxs)(`g`,{className:c([`react-flow__edge`,`react-flow__edge-${w}`,S.className,y,{selected:S.selected,animated:S.animated,inactive:!O&&!i,updating:A,selectable:O}]),onClick:U,onDoubleClick:W,onContextMenu:te,onMouseEnter:ne,onMouseMove:re,onMouseLeave:ie,onKeyDown:E?t=>{if(!x&&ta.includes(t.key)&&O){let{unselectNodesAndEdges:n,addSelectedEdges:r}=P.getState();t.key===`Escape`?(k.current?.blur(),n({edges:[S]})):r([e])}}:void 0,tabIndex:E?0:void 0,role:S.ariaRole??(E?`group`:`img`),"aria-roledescription":`edge`,"data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":E?`${ic}-${_}`:void 0,ref:k,...S.domAttributes,children:[!M&&(0,o.jsx)(T,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:O,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:I,sourceY:L,targetX:R,targetY:z,sourcePosition:B,targetPosition:V,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:H,markerEnd:ee,pathOptions:`pathOptions`in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),D&&(0,o.jsx)(Su,{edge:S,isReconnectable:D,reconnectRadius:p,onReconnect:m,onReconnectStart:h,onReconnectEnd:g,sourceX:I,sourceY:L,targetX:R,targetY:z,sourcePosition:B,targetPosition:V,setUpdateHover:j,setReconnecting:N})]})})}var wu=(0,s.memo)(Cu),Tu=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Eu({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:p,onReconnectStart:m,onReconnectEnd:h,disableKeyboardA11y:g}){let{edgesFocusable:_,edgesReconnectable:v,elementsSelectable:y,onError:b}=Q(Tu,Z),x=Hl(t);return(0,o.jsxs)(`div`,{className:`react-flow__edges`,children:[(0,o.jsx)(Yl,{defaultColor:e,rfId:n}),x.map(e=>(0,o.jsx)(wu,{id:e,edgesFocusable:_,edgesReconnectable:v,elementsSelectable:y,noPanClassName:i,onReconnect:a,onContextMenu:s,onMouseEnter:c,onMouseMove:l,onMouseLeave:u,onClick:d,reconnectRadius:f,onDoubleClick:p,onReconnectStart:m,onReconnectEnd:h,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:g},e))]})}Eu.displayName=`EdgeRenderer`;var Du=(0,s.memo)(Eu),Ou=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ku({children:e}){return(0,o.jsx)(`div`,{className:`react-flow__viewport xyflow__viewport react-flow__container`,style:{transform:Q(Ou)},children:e})}function Au(e){let t=Yc(),n=(0,s.useRef)(!1);(0,s.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}var ju=e=>e.panZoom?.syncViewport;function Mu(e){let t=Q(ju),n=$();return(0,s.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Nu(e){return e.connection.inProgress?{...e.connection,to:za(e.connection.to,e.transform)}:{...e.connection}}function Pu(e){return e?t=>e(Nu(t)):Nu}function Fu(e){return Q(Pu(e),Z)}var Iu=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Lu({containerStyle:e,style:t,type:n,component:r}){let{nodesConnectable:i,width:a,height:s,isValid:l,inProgress:u}=Q(Iu,Z);return a&&i&&u?(0,o.jsx)(`svg`,{style:e,width:a,height:s,className:`react-flow__connectionline react-flow__container`,children:(0,o.jsx)(`g`,{className:c([`react-flow__connection`,ua(l)]),children:(0,o.jsx)(Ru,{style:t,type:n,CustomComponent:r,isValid:l})})}):null}var Ru=({style:e,type:t=sa.Bezier,CustomComponent:n,isValid:r})=>{let{inProgress:i,from:a,fromNode:s,fromHandle:c,fromPosition:l,to:u,toNode:d,toHandle:f,toPosition:p,pointer:m}=Fu();if(!i)return;if(n)return(0,o.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:c,fromX:a.x,fromY:a.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:p,connectionStatus:ua(r),toNode:d,toHandle:f,pointer:m});let h=``,g={sourceX:a.x,sourceY:a.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:p};switch(t){case sa.Bezier:[h]=uo(g);break;case sa.SimpleBezier:[h]=eu(g);break;case sa.Step:[h]=wo({...g,borderRadius:0});break;case sa.SmoothStep:[h]=wo(g);break;default:[h]=vo(g)}return(0,o.jsx)(`path`,{d:h,fill:`none`,className:`react-flow__connection-path`,style:e})};Ru.displayName=`ConnectionLine`;var zu={};function Bu(e=zu){(0,s.useRef)(e),$(),(0,s.useEffect)(()=>{},[e])}function Vu(){$(),(0,s.useRef)(!1),(0,s.useEffect)(()=>{},[])}function Hu({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:p,onSelectionEnd:m,connectionLineType:h,connectionLineStyle:g,connectionLineComponent:_,connectionLineContainerStyle:v,selectionKeyCode:y,selectionOnDrag:b,selectionMode:x,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:w,deleteKeyCode:T,onlyRenderVisibleElements:E,elementsSelectable:D,defaultViewport:O,translateExtent:k,minZoom:A,maxZoom:j,preventScrolling:M,defaultMarkerColor:N,zoomOnScroll:P,zoomOnPinch:F,panOnScroll:I,panOnScrollSpeed:L,panOnScrollMode:R,zoomOnDoubleClick:z,panOnDrag:B,onPaneClick:V,onPaneMouseEnter:H,onPaneMouseMove:ee,onPaneMouseLeave:U,onPaneScroll:W,onPaneContextMenu:te,paneClickDistance:ne,nodeClickDistance:re,onEdgeContextMenu:ie,onEdgeMouseEnter:ae,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:ce,onReconnect:le,onReconnectStart:ue,onReconnectEnd:de,noDragClassName:fe,noWheelClassName:pe,noPanClassName:me,disableKeyboardA11y:he,nodeExtent:ge,rfId:_e,viewport:ve,onViewportChange:ye}){return Bu(e),Bu(t),Vu(),Au(n),Mu(ve),(0,o.jsx)(jl,{onPaneClick:V,onPaneMouseEnter:H,onPaneMouseMove:ee,onPaneMouseLeave:U,onPaneContextMenu:te,onPaneScroll:W,paneClickDistance:ne,deleteKeyCode:T,selectionKeyCode:y,selectionOnDrag:b,selectionMode:x,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:w,elementsSelectable:D,zoomOnScroll:P,zoomOnPinch:F,zoomOnDoubleClick:z,panOnScroll:I,panOnScrollSpeed:L,panOnScrollMode:R,panOnDrag:B,defaultViewport:O,translateExtent:k,minZoom:A,maxZoom:j,onSelectionContextMenu:f,preventScrolling:M,noDragClassName:fe,noWheelClassName:pe,noPanClassName:me,disableKeyboardA11y:he,onViewportChange:ye,isControlledViewport:!!ve,children:(0,o.jsxs)(ku,{children:[(0,o.jsx)(Du,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:le,onReconnectStart:ue,onReconnectEnd:de,onlyRenderVisibleElements:E,onEdgeContextMenu:ie,onEdgeMouseEnter:ae,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:ce,defaultMarkerColor:N,noPanClassName:me,disableKeyboardA11y:he,rfId:_e}),(0,o.jsx)(Lu,{style:g,type:h,component:_,containerStyle:v}),(0,o.jsx)(`div`,{className:`react-flow__edgelabel-renderer`}),(0,o.jsx)(Vl,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:re,onlyRenderVisibleElements:E,noPanClassName:me,noDragClassName:fe,disableKeyboardA11y:he,nodeExtent:ge,rfId:_e}),(0,o.jsx)(`div`,{className:`react-flow__viewport-portal`})]})})}Hu.displayName=`GraphView`;var Uu=(0,s.memo)(Hu),Wu=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:o,fitViewOptions:s,minZoom:c=.5,maxZoom:l=2,nodeOrigin:u,nodeExtent:d,zIndexMode:f=`basic`}={})=>{let p=new Map,m=new Map,h=new Map,g=new Map,_=r??t??[],v=n??e??[],y=u??[0,0],b=d??ea;Yo(h,g,_);let x=Bo(v,p,m,{nodeOrigin:y,nodeExtent:b,zIndexMode:f}),S=[0,0,1];if(o&&i&&a){let{x:e,y:t,zoom:n}=Wa(ga(p,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),i,a,c,l,s?.padding??.1);S=[e,t,n]}return{rfId:`1`,width:i??0,height:a??0,transform:S,nodes:v,nodesInitialized:x,nodeLookup:p,parentLookup:m,edges:_,edgeLookup:g,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:c,maxZoom:l,translateExtent:ea,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ra.Strict,domNode:null,paneDragging:!1,noPanClassName:`nopan`,nodeOrigin:y,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:s,fitViewResolver:null,connection:{...oa},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:``,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:La,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:`react`,debug:!1,ariaLabelConfig:na,zIndexMode:f,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},Gu=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:o,fitViewOptions:s,minZoom:c,maxZoom:l,nodeOrigin:u,nodeExtent:d,zIndexMode:f})=>Zs((p,m)=>{async function h(){let{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:i,height:a,minZoom:o,maxZoom:s}=m();t&&(await ba({nodes:e,width:i,height:a,panZoom:t,minZoom:o,maxZoom:s},n),r?.resolve(!0),p({fitViewResolver:null}))}return{...Wu({nodes:e,edges:t,width:i,height:a,fitView:o,fitViewOptions:s,minZoom:c,maxZoom:l,nodeOrigin:u,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:f}),setNodes:e=>{let{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:i,fitViewQueued:a,zIndexMode:o}=m(),s=Bo(e,t,n,{nodeOrigin:r,nodeExtent:d,elevateNodesOnSelect:i,checkEquality:!0,zIndexMode:o});a&&s?(h(),p({nodes:e,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:e,nodesInitialized:s})},setEdges:e=>{let{connectionLookup:t,edgeLookup:n}=m();Yo(t,n,e),p({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){let{setNodes:t}=m();t(e),p({hasDefaultNodes:!0})}if(t){let{setEdges:e}=m();e(t),p({hasDefaultEdges:!0})}},updateNodeInternals:e=>{let{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:i,nodeOrigin:a,nodeExtent:o,debug:s,fitViewQueued:c,zIndexMode:l}=m(),{changes:u,updatedInternals:d}=Ko(e,n,r,i,a,o,l);d&&(Lo(n,r,{nodeOrigin:a,nodeExtent:o,zIndexMode:l}),c?(h(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),u?.length>0&&(s&&console.log(`React Flow: trigger node changes`,u),t?.(u)))},updateNodePositions:(e,t=!1)=>{let n=[],r=[],{nodeLookup:i,triggerNodeChanges:a,connection:o,updateConnection:s,onNodesChangeMiddlewareMap:c}=m();for(let[a,c]of e){let e=i.get(a),l=!!(e?.expandParent&&e?.parentId&&c?.position),u={id:a,type:`position`,position:l?{x:Math.max(0,c.position.x),y:Math.max(0,c.position.y)}:c.position,dragging:t};if(e&&o.inProgress&&o.fromNode.id===e.id){let t=Oo(e,o.fromHandle,X.Left,!0);s({...o,from:t})}l&&e.parentId&&n.push({id:a,parentId:e.parentId,rect:{...c.internals.positionAbsolute,width:c.measured.width??0,height:c.measured.height??0}}),r.push(u)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=m(),a=Go(n,i,e,t);r.push(...a)}for(let e of c.values())r=e(r);a(r)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:i,debug:a}=m();e?.length&&(i&&n(Nc(e,r)),a&&console.log(`React Flow: trigger node changes`,e),t?.(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:i,debug:a}=m();e?.length&&(i&&n(Pc(e,r)),a&&console.log(`React Flow: trigger edge changes`,e),t?.(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:a}=m();if(t){i(e.map(e=>Fc(e,!0)));return}i(Ic(r,new Set([...e]),!0)),a(Ic(n))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:a}=m();if(t){a(e.map(e=>Fc(e,!0)));return}a(Ic(n,new Set([...e]))),i(Ic(r,new Set,!0))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{let{edges:n,nodes:r,nodeLookup:i,triggerNodeChanges:a,triggerEdgeChanges:o}=m(),s=e||r,c=t||n,l=s.map(e=>{let t=i.get(e.id);return t&&(t.selected=!1),Fc(e.id,!1)}),u=c.map(e=>Fc(e.id,!1));a(l),o(u)},setMinZoom:e=>{let{panZoom:t,maxZoom:n}=m();t?.setScaleExtent([e,n]),p({minZoom:e})},setMaxZoom:e=>{let{panZoom:t,minZoom:n}=m();t?.setScaleExtent([n,e]),p({maxZoom:e})},setTranslateExtent:e=>{m().panZoom?.setTranslateExtent(e),p({translateExtent:e})},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:i}=m();if(!i)return;let a=t.reduce((e,t)=>t.selected?[...e,Fc(t.id,!1)]:e,[]),o=e.reduce((e,t)=>t.selected?[...e,Fc(t.id,!1)]:e,[]);n(a),r(o)},setNodeExtent:e=>{let{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:i,elevateNodesOnSelect:a,nodeExtent:o,zIndexMode:s}=m();e[0][0]===o[0][0]&&e[0][1]===o[0][1]&&e[1][0]===o[1][0]&&e[1][1]===o[1][1]||(Bo(t,n,r,{nodeOrigin:i,nodeExtent:e,elevateNodesOnSelect:a,checkEquality:!1,zIndexMode:s}),p({nodeExtent:e}))},panBy:e=>{let{transform:t,width:n,height:r,panZoom:i,translateExtent:a}=m();return qo({delta:e,panZoom:i,transform:t,translateExtent:a,width:n,height:r})},setCenter:async(e,t,n)=>{let{width:r,height:i,maxZoom:a,panZoom:o}=m();if(!o)return Promise.resolve(!1);let s=n?.zoom===void 0?a:n.zoom;return await o.setViewport({x:r/2-e*s,y:i/2-t*s,zoom:s},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...oa}})},updateConnection:e=>{p({connection:e})},reset:()=>p({...Wu()})}},Object.is);function Ku({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:a,initialMinZoom:c,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:f,nodeExtent:p,zIndexMode:m,children:h}){let[g]=(0,s.useState)(()=>Gu({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:d,minZoom:c,maxZoom:l,fitViewOptions:u,nodeOrigin:f,nodeExtent:p,zIndexMode:m}));return(0,o.jsx)($s,{value:g,children:(0,o.jsx)(Kc,{children:h})})}function qu({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:a,height:c,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:m,zIndexMode:h}){return(0,s.useContext)(Qs)?(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(Ku,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:a,initialHeight:c,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:f,nodeOrigin:p,nodeExtent:m,zIndexMode:h,children:e})}var Ju={width:`100%`,height:`100%`,overflow:`hidden`,position:`relative`,zIndex:0};function Yu({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a,edgeTypes:l,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:m,onMoveEnd:h,onConnect:g,onConnectStart:_,onConnectEnd:v,onClickConnectStart:y,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:S,onNodeMouseLeave:C,onNodeContextMenu:w,onNodeDoubleClick:T,onNodeDragStart:E,onNodeDrag:D,onNodeDragStop:O,onNodesDelete:k,onEdgesDelete:A,onDelete:j,onSelectionChange:M,onSelectionDragStart:N,onSelectionDrag:P,onSelectionDragStop:F,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:R,onBeforeDelete:z,connectionMode:B,connectionLineType:V=sa.Bezier,connectionLineStyle:H,connectionLineComponent:ee,connectionLineContainerStyle:U,deleteKeyCode:W=`Backspace`,selectionKeyCode:te=`Shift`,selectionOnDrag:ne=!1,selectionMode:re=aa.Full,panActivationKeyCode:ie=`Space`,multiSelectionKeyCode:ae=Ga()?`Meta`:`Control`,zoomActivationKeyCode:oe=Ga()?`Meta`:`Control`,snapToGrid:se,snapGrid:ce,onlyRenderVisibleElements:le=!1,selectNodesOnDrag:ue,nodesDraggable:de,autoPanOnNodeFocus:fe,nodesConnectable:pe,nodesFocusable:me,nodeOrigin:he=vc,edgesFocusable:ge,edgesReconnectable:_e,elementsSelectable:ve=!0,defaultViewport:ye=yc,minZoom:be=.5,maxZoom:xe=2,translateExtent:Se=ea,preventScrolling:Ce=!0,nodeExtent:we,defaultMarkerColor:Te=`#b1b1b7`,zoomOnScroll:Ee=!0,zoomOnPinch:De=!0,panOnScroll:Oe=!1,panOnScrollSpeed:ke=.5,panOnScrollMode:Ae=ia.Free,zoomOnDoubleClick:je=!0,panOnDrag:Me=!0,onPaneClick:Ne,onPaneMouseEnter:Pe,onPaneMouseMove:Fe,onPaneMouseLeave:Ie,onPaneScroll:Le,onPaneContextMenu:Re,paneClickDistance:ze=1,nodeClickDistance:Be=0,children:Ve,onReconnect:He,onReconnectStart:Ue,onReconnectEnd:We,onEdgeContextMenu:Ge,onEdgeDoubleClick:Ke,onEdgeMouseEnter:qe,onEdgeMouseMove:Je,onEdgeMouseLeave:Ye,reconnectRadius:Xe=10,onNodesChange:Ze,onEdgesChange:Qe,noDragClassName:$e=`nodrag`,noWheelClassName:et=`nowheel`,noPanClassName:tt=`nopan`,fitView:nt,fitViewOptions:rt,connectOnClick:it,attributionPosition:at,proOptions:ot,defaultEdgeOptions:st,elevateNodesOnSelect:ct=!0,elevateEdgesOnSelect:lt=!1,disableKeyboardA11y:ut=!1,autoPanOnConnect:dt,autoPanOnNodeDrag:ft,autoPanSpeed:pt,connectionRadius:mt,isValidConnection:ht,onError:gt,style:_t,id:vt,nodeDragThreshold:yt,connectionDragThreshold:G,viewport:bt,onViewportChange:xt,width:St,height:K,colorMode:Ct=`light`,debug:q,onScroll:wt,ariaLabelConfig:Tt,zIndexMode:Et=`basic`,...Dt},Ot){let kt=vt||`1`,At=Tc(Ct),jt=(0,s.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:`instant`}),wt?.(e)},[wt]);return(0,o.jsx)(`div`,{"data-testid":`rf__wrapper`,...Dt,onScroll:jt,style:{..._t,...Ju},ref:Ot,className:c([`react-flow`,i,At]),id:vt,role:`application`,children:(0,o.jsxs)(qu,{nodes:e,edges:t,width:St,height:K,fitView:nt,fitViewOptions:rt,minZoom:be,maxZoom:xe,nodeOrigin:he,nodeExtent:we,zIndexMode:Et,children:[(0,o.jsx)(Uu,{onInit:f,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:x,onNodeMouseMove:S,onNodeMouseLeave:C,onNodeContextMenu:w,onNodeDoubleClick:T,nodeTypes:a,edgeTypes:l,connectionLineType:V,connectionLineStyle:H,connectionLineComponent:ee,connectionLineContainerStyle:U,selectionKeyCode:te,selectionOnDrag:ne,selectionMode:re,deleteKeyCode:W,multiSelectionKeyCode:ae,panActivationKeyCode:ie,zoomActivationKeyCode:oe,onlyRenderVisibleElements:le,defaultViewport:ye,translateExtent:Se,minZoom:be,maxZoom:xe,preventScrolling:Ce,zoomOnScroll:Ee,zoomOnPinch:De,zoomOnDoubleClick:je,panOnScroll:Oe,panOnScrollSpeed:ke,panOnScrollMode:Ae,panOnDrag:Me,onPaneClick:Ne,onPaneMouseEnter:Pe,onPaneMouseMove:Fe,onPaneMouseLeave:Ie,onPaneScroll:Le,onPaneContextMenu:Re,paneClickDistance:ze,nodeClickDistance:Be,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:R,onReconnect:He,onReconnectStart:Ue,onReconnectEnd:We,onEdgeContextMenu:Ge,onEdgeDoubleClick:Ke,onEdgeMouseEnter:qe,onEdgeMouseMove:Je,onEdgeMouseLeave:Ye,reconnectRadius:Xe,defaultMarkerColor:Te,noDragClassName:$e,noWheelClassName:et,noPanClassName:tt,rfId:kt,disableKeyboardA11y:ut,nodeExtent:we,viewport:bt,onViewportChange:xt}),(0,o.jsx)(Cc,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:_,onConnectEnd:v,onClickConnectStart:y,onClickConnectEnd:b,nodesDraggable:de,autoPanOnNodeFocus:fe,nodesConnectable:pe,nodesFocusable:me,edgesFocusable:ge,edgesReconnectable:_e,elementsSelectable:ve,elevateNodesOnSelect:ct,elevateEdgesOnSelect:lt,minZoom:be,maxZoom:xe,nodeExtent:we,onNodesChange:Ze,onEdgesChange:Qe,snapToGrid:se,snapGrid:ce,connectionMode:B,translateExtent:Se,connectOnClick:it,defaultEdgeOptions:st,fitView:nt,fitViewOptions:rt,onNodesDelete:k,onEdgesDelete:A,onDelete:j,onNodeDragStart:E,onNodeDrag:D,onNodeDragStop:O,onSelectionDrag:P,onSelectionDragStart:N,onSelectionDragStop:F,onMove:p,onMoveStart:m,onMoveEnd:h,noPanClassName:tt,nodeOrigin:he,rfId:kt,autoPanOnConnect:dt,autoPanOnNodeDrag:ft,autoPanSpeed:pt,onError:gt,connectionRadius:mt,isValidConnection:ht,selectNodesOnDrag:ue,nodeDragThreshold:yt,connectionDragThreshold:G,onBeforeDelete:z,debug:q,ariaLabelConfig:Tt,zIndexMode:Et}),(0,o.jsx)(_c,{onSelectionChange:M}),Ve,(0,o.jsx)(dc,{proOptions:ot,position:at}),(0,o.jsx)(lc,{rfId:kt,disableKeyboardA11y:ut})]})})}var Xu=Vc(Yu);Y.error014();function Zu({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,o.jsx)(`path`,{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:c([`react-flow__background-pattern`,n,r])})}function Qu({radius:e,className:t}){return(0,o.jsx)(`circle`,{cx:e,cy:e,r:e,className:c([`react-flow__background-pattern`,`dots`,t])})}var $u;(function(e){e.Lines=`lines`,e.Dots=`dots`,e.Cross=`cross`})($u||={});var ed={[$u.Dots]:1,[$u.Lines]:1,[$u.Cross]:6},td=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function nd({id:e,variant:t=$u.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=0,color:l,bgColor:u,style:d,className:f,patternClassName:p}){let m=(0,s.useRef)(null),{transform:h,patternId:g}=Q(td,Z),_=r||ed[t],v=t===$u.Dots,y=t===$u.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*h[2]||1,b[1]*h[2]||1],S=_*h[2],C=Array.isArray(a)?a:[a,a],w=y?[S,S]:x,T=[C[0]*h[2]||1+w[0]/2,C[1]*h[2]||1+w[1]/2],E=`${g}${e||``}`;return(0,o.jsxs)(`svg`,{className:c([`react-flow__background`,f]),style:{...d,...el,"--xy-background-color-props":u,"--xy-background-pattern-color-props":l},ref:m,"data-testid":`rf__background`,children:[(0,o.jsx)(`pattern`,{id:E,x:h[0]%x[0],y:h[1]%x[1],width:x[0],height:x[1],patternUnits:`userSpaceOnUse`,patternTransform:`translate(-${T[0]},-${T[1]})`,children:v?(0,o.jsx)(Qu,{radius:S/2,className:p}):(0,o.jsx)(Zu,{dimensions:w,lineWidth:i,variant:t,className:p})}),(0,o.jsx)(`rect`,{x:`0`,y:`0`,width:`100%`,height:`100%`,fill:`url(#${E})`})]})}nd.displayName=`Background`;var rd=(0,s.memo)(nd);function id(){return(0,o.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 32`,children:(0,o.jsx)(`path`,{d:`M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z`})})}function ad(){return(0,o.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 5`,children:(0,o.jsx)(`path`,{d:`M0 0h32v4.2H0z`})})}function od(){return(0,o.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 30`,children:(0,o.jsx)(`path`,{d:`M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z`})})}function sd(){return(0,o.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`,children:(0,o.jsx)(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z`})})}function cd(){return(0,o.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`,children:(0,o.jsx)(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z`})})}function ld({children:e,className:t,...n}){return(0,o.jsx)(`button`,{type:`button`,className:c([`react-flow__controls-button`,t]),...n,children:e})}var ud=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function dd({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:l,onInteractiveChange:u,className:d,children:f,position:p=`bottom-left`,orientation:m=`vertical`,"aria-label":h}){let g=$(),{isInteractive:_,minZoomReached:v,maxZoomReached:y,ariaLabelConfig:b}=Q(ud,Z),{zoomIn:x,zoomOut:S,fitView:C}=Yc(),w=()=>{x(),a?.()},T=()=>{S(),s?.()},E=()=>{C(i),l?.()},D=()=>{g.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),u?.(!_)};return(0,o.jsxs)(uc,{className:c([`react-flow__controls`,m===`horizontal`?`horizontal`:`vertical`,d]),position:p,style:e,"data-testid":`rf__controls`,"aria-label":h??b[`controls.ariaLabel`],children:[t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ld,{onClick:w,className:`react-flow__controls-zoomin`,title:b[`controls.zoomIn.ariaLabel`],"aria-label":b[`controls.zoomIn.ariaLabel`],disabled:y,children:(0,o.jsx)(id,{})}),(0,o.jsx)(ld,{onClick:T,className:`react-flow__controls-zoomout`,title:b[`controls.zoomOut.ariaLabel`],"aria-label":b[`controls.zoomOut.ariaLabel`],disabled:v,children:(0,o.jsx)(ad,{})})]}),n&&(0,o.jsx)(ld,{className:`react-flow__controls-fitview`,onClick:E,title:b[`controls.fitView.ariaLabel`],"aria-label":b[`controls.fitView.ariaLabel`],children:(0,o.jsx)(od,{})}),r&&(0,o.jsx)(ld,{className:`react-flow__controls-interactive`,onClick:D,title:b[`controls.interactive.ariaLabel`],"aria-label":b[`controls.interactive.ariaLabel`],children:_?(0,o.jsx)(cd,{}):(0,o.jsx)(sd,{})}),f]})}dd.displayName=`Controls`,(0,s.memo)(dd);function fd({id:e,x:t,y:n,width:r,height:i,style:a,color:s,strokeColor:l,strokeWidth:u,className:d,borderRadius:f,shapeRendering:p,selected:m,onClick:h}){let{background:g,backgroundColor:_}=a||{},v=s||g||_;return(0,o.jsx)(`rect`,{className:c([`react-flow__minimap-node`,{selected:m},d]),x:t,y:n,rx:f,ry:f,width:r,height:i,style:{fill:v,stroke:l,strokeWidth:u},shapeRendering:p,onClick:h?t=>h(t,e):void 0})}var pd=(0,s.memo)(fd),md=e=>e.nodes.map(e=>e.id),hd=e=>e instanceof Function?e:()=>e;function gd({nodeStrokeColor:e,nodeColor:t,nodeClassName:n=``,nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=pd,onClick:s}){let c=Q(md,Z),l=hd(t),u=hd(e),d=hd(n),f=typeof window>`u`||window.chrome?`crispEdges`:`geometricPrecision`;return(0,o.jsx)(o.Fragment,{children:c.map(e=>(0,o.jsx)(vd,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:f},e))})}function _d({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:c,onClick:l}){let{node:u,x:d,y:f,width:p,height:m}=Q(t=>{let{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:i,y:a}=n.positionAbsolute,{width:o,height:s}=qa(r);return{node:r,x:i,y:a,width:o,height:s}},Z);return!u||u.hidden||!Ja(u)?null:(0,o.jsx)(c,{x:d,y:f,width:p,height:m,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:a,shapeRendering:s,onClick:l,id:u.id})}var vd=(0,s.memo)(_d),yd=(0,s.memo)(gd),bd=200,xd=150,Sd=e=>!e.hidden,Cd=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Na(ga(e.nodeLookup,{filter:Sd}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},wd=`react-flow__minimap-desc`;function Td({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i=``,nodeBorderRadius:a=5,nodeStrokeWidth:l,nodeComponent:u,bgColor:d,maskColor:f,maskStrokeColor:p,maskStrokeWidth:m,position:h=`bottom-right`,onClick:g,onNodeClick:_,pannable:v=!1,zoomable:y=!1,ariaLabel:b,inversePan:x,zoomStep:S=1,offsetScale:C=5}){let w=$(),T=(0,s.useRef)(null),{boundingRect:E,viewBB:D,rfId:O,panZoom:k,translateExtent:A,flowWidth:j,flowHeight:M,ariaLabelConfig:N}=Q(Cd,Z),P=e?.width??bd,F=e?.height??xd,I=E.width/P,L=E.height/F,R=Math.max(I,L),z=R*P,B=R*F,V=C*R,H=E.x-(z-E.width)/2-V,ee=E.y-(B-E.height)/2-V,U=z+V*2,W=B+V*2,te=`${wd}-${O}`,ne=(0,s.useRef)(0),re=(0,s.useRef)();ne.current=R,(0,s.useEffect)(()=>{if(T.current&&k)return re.current=fs({domNode:T.current,panZoom:k,getTransform:()=>w.getState().transform,getViewScale:()=>ne.current}),()=>{re.current?.destroy()}},[k]),(0,s.useEffect)(()=>{re.current?.update({translateExtent:A,width:j,height:M,inversePan:x,pannable:v,zoomStep:S,zoomable:y})},[v,y,x,S,A,j,M]);let ie=g?e=>{let[t,n]=re.current?.pointer(e)||[0,0];g(e,{x:t,y:n})}:void 0,ae=_?(0,s.useCallback)((e,t)=>{let n=w.getState().nodeLookup.get(t).internals.userNode;_(e,n)},[]):void 0,oe=b??N[`minimap.ariaLabel`];return(0,o.jsx)(uc,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof d==`string`?d:void 0,"--xy-minimap-mask-background-color-props":typeof f==`string`?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof p==`string`?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof m==`number`?m*R:void 0,"--xy-minimap-node-background-color-props":typeof r==`string`?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n==`string`?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l==`number`?l:void 0},className:c([`react-flow__minimap`,t]),"data-testid":`rf__minimap`,children:(0,o.jsxs)(`svg`,{width:P,height:F,viewBox:`${H} ${ee} ${U} ${W}`,className:`react-flow__minimap-svg`,role:`img`,"aria-labelledby":te,ref:T,onClick:ie,children:[oe&&(0,o.jsx)(`title`,{id:te,children:oe}),(0,o.jsx)(yd,{onClick:ae,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:l,nodeComponent:u}),(0,o.jsx)(`path`,{className:`react-flow__minimap-mask`,d:`M${H-V},${ee-V}h${U+V*2}v${W+V*2}h${-U-V*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:`evenodd`,pointerEvents:`none`})]})})}Td.displayName=`MiniMap`,(0,s.memo)(Td);var Ed=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Dd={[Ds.Line]:`right`,[Ds.Handle]:`bottom-right`};function Od({nodeId:e,position:t,variant:n=Ds.Handle,className:r,style:i=void 0,children:a,color:l,minWidth:u=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:h,autoScale:g=!0,shouldResize:_,onResizeStart:v,onResize:y,onResizeEnd:b}){let x=ml(),S=typeof e==`string`?e:x,C=$(),w=(0,s.useRef)(null),T=n===Ds.Handle,E=Q((0,s.useCallback)(Ed(T&&g),[T,g]),Z),D=(0,s.useRef)(null),O=t??Dd[n];return(0,s.useEffect)(()=>{if(!(!w.current||!S))return D.current||=zs({domNode:w.current,nodeId:S,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,domNode:a}=C.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,paneDomNode:a}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:r,parentLookup:i,nodeOrigin:a}=C.getState(),o=[],s={x:e.x,y:e.y},c=r.get(S);if(c&&c.expandParent&&c.parentId){let t=c.origin??a,n=e.width??c.measured.width??0,l=e.height??c.measured.height??0,u=Go([{id:c.id,parentId:c.parentId,rect:{width:n,height:l,...Ya({x:e.x??c.position.x,y:e.y??c.position.y},{width:n,height:l},c.parentId,r,t)}}],r,i,a);o.push(...u),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*l,e.y):void 0}if(s.x!==void 0&&s.y!==void 0){let e={id:S,type:`position`,position:{...s}};o.push(e)}if(e.width!==void 0&&e.height!==void 0){let t={id:S,type:`dimensions`,resizing:!0,setAttributes:h?h===`horizontal`?`width`:`height`:!0,dimensions:{width:e.width,height:e.height}};o.push(t)}for(let e of t){let t={...e,type:`position`};o.push(t)}n(o)},onEnd:({width:e,height:t})=>{let n={id:S,type:`dimensions`,resizing:!1,dimensions:{width:e,height:t}};C.getState().triggerNodeChanges([n])}}),D.current.update({controlPosition:O,boundaries:{minWidth:u,minHeight:d,maxWidth:f,maxHeight:p},keepAspectRatio:m,resizeDirection:h,onResizeStart:v,onResize:y,onResizeEnd:b,shouldResize:_}),()=>{D.current?.destroy()}},[O,u,d,f,p,m,v,y,b,_]),(0,o.jsx)(`div`,{className:c([`react-flow__resize-control`,`nodrag`,...O.split(`-`),n,r]),ref:w,style:{...i,scale:E,...l&&{[T?`backgroundColor`:`borderColor`]:l}},children:a})}(0,s.memo)(Od);function kd({data:e}){return(0,o.jsxs)(`div`,{onClick:e.onClick,style:{padding:`10px 16px`,borderRadius:12,fontSize:12,fontWeight:600,minWidth:120,textAlign:`center`,cursor:`pointer`,color:`#000`,background:e.isActive?`#00e676`:e.isLeaf?`#ffd54f`:`#64b5f6`,boxShadow:e.isActive?`0 0 18px rgba(0,230,118,0.9)`:`0 4px 12px rgba(0,0,0,0.4)`,transition:`all 0.3s ease`,userSelect:`none`},children:[e.label,(0,o.jsx)(vl,{type:`target`,position:X.Top}),(0,o.jsx)(vl,{type:`source`,position:X.Bottom})]})}const Ad={id:`animalia`,label:`Animalia (K)`,children:[{id:`parazoa`,label:`Parazoa (SK)`,children:[{id:`porifera`,label:`Porifera (P)`}]},{id:`eumetazoa`,label:`Eumetazoa (SK)`,children:[{id:`radial`,label:`Radial`,children:[{id:`coelenterata`,label:`Coelenterata (P)`},{id:`ctenophora`,label:`Ctenophora (P)`}]},{id:`bilateral`,label:`Bilateral`,children:[{id:`acoelomates`,label:`Acoelomates`,children:[{id:`platyhelminthes`,label:`Platyhelminthes (P)`}]},{id:`pseudocoelomates`,label:`Pseudocoelomates`,children:[{id:`aschelminthes`,label:`Aschelminthes (P)`}]},{id:`coelomates`,label:`Coelomates`,children:[{id:`annelida`,label:`Annelida (P)`},{id:`arthropoda`,label:`Arthropoda (P)`},{id:`mollusca`,label:`Mollusca (P)`},{id:`echinodermata`,label:`Echinodermata (P)`},{id:`hemichordata`,label:`Hemichordata (P)`},{id:`chordata`,label:`Chordata (P)`}]}]}]}]};var jd={custom:kd};function Md(){let e=n(),{fitView:t}=Yc(),[r,i]=(0,s.useState)({}),[a,c]=(0,s.useState)(null),l=[],u=[],d=window.innerWidth<768?160:240,f=(t,n)=>{if(c(n.id),!n.children||n.children.length===0){e(`/animal/${n.id}`);return}i(e=>({...e,[t]:e[t]===n.id?``:n.id}))},p=(e,t,n,i)=>{let o=!e.children||e.children.length===0;if(l.push({id:e.id,type:`custom`,position:{x:t,y:n},data:{label:e.label,isLeaf:o,isActive:a===e.id,onClick:()=>f(i??`root`,e)}}),i&&u.push({id:`${i}-${e.id}`,source:i,target:e.id,animated:!0}),!e.children)return;let s=r[i??`root`];i&&s!==e.id||e.children.forEach((r,i)=>{p(r,t+(i-(e.children.length-1)/2)*d,n+120,e.id)})};p(Ad,0,0);let m=(0,s.useCallback)(()=>{t({duration:800,padding:.2})},[t]),h=(0,s.useCallback)(()=>{i({}),c(null),setTimeout(()=>{t({duration:800,padding:.2})},100)},[t]);return(0,o.jsx)(`div`,{style:{height:`100vh`,background:`#121212`},children:(0,o.jsxs)(Xu,{nodes:l,edges:u,nodeTypes:jd,fitView:!0,minZoom:.3,proOptions:{hideAttribution:!0},children:[(0,o.jsx)(rd,{}),(0,o.jsxs)(uc,{position:`top-right`,style:{marginTop:`90px`,marginRight:`30px`,display:`flex`,gap:`12px`,padding:`8px`,background:`rgba(30, 41, 59, 0.7)`,backdropFilter:`blur(10px)`,borderRadius:`12px`,border:`1px solid rgba(255, 255, 255, 0.1)`,boxShadow:`0 8px 32px rgba(0, 0, 0, 0.3)`},children:[(0,o.jsxs)(`button`,{onClick:h,title:`Collapse all nodes`,style:{background:`linear-gradient(135deg, #2f7d46, #1e5231)`,color:`white`,border:`1px solid rgba(255, 255, 255, 0.1)`,padding:`10px 16px`,borderRadius:`8px`,cursor:`pointer`,fontWeight:`600`,fontSize:`13px`,display:`flex`,alignItems:`center`,gap:`8px`,transition:`all 0.2s ease`,boxShadow:`0 2px 4px rgba(0, 0, 0, 0.2)`},onMouseOver:e=>{e.currentTarget.style.transform=`translateY(-1px)`,e.currentTarget.style.boxShadow=`0 4px 8px rgba(47, 125, 70, 0.4)`},onMouseOut:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 2px 4px rgba(0, 0, 0, 0.2)`},children:[(0,o.jsx)(`span`,{style:{fontSize:`16px`},children:``}),` Reset Tree`]}),(0,o.jsx)(`div`,{style:{width:`1px`,background:`rgba(255,255,255,0.1)`,margin:`0 4px`}}),(0,o.jsxs)(`button`,{onClick:m,title:`Center view`,style:{background:`rgba(255, 255, 255, 0.1)`,color:`#e2e8f0`,border:`1px solid rgba(255, 255, 255, 0.05)`,padding:`10px 16px`,borderRadius:`8px`,cursor:`pointer`,fontWeight:`600`,fontSize:`13px`,display:`flex`,alignItems:`center`,gap:`8px`,transition:`all 0.2s ease`},onMouseOver:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.2)`,e.currentTarget.style.color=`white`},onMouseOut:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.1)`,e.currentTarget.style.color=`#e2e8f0`},children:[(0,o.jsx)(`span`,{style:{fontSize:`16px`},children:``}),` Reset View`]})]})]})})}function Nd(){return(0,o.jsx)(Ku,{children:(0,o.jsx)(Md,{})})}function Pd(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Nd,{})})}var Fd=Pd;export{Fd as default};